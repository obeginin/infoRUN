{# Templates/Tasks/listTasks.html #}
{% extends "base.html" %}
<!--страница с вариантом-->
{% block title %}Список Задач{% endblock %}
{% block title_1 %}Список Задач!{% endblock %}
{% block content %}

<p>вариант № {{student}}</p>>
<pre>
{{ student.__dict__ }}
</pre>
    <ul id="tasks-list"></ul>

<!--Вывод списка вариантов-->
    <script>
        async function loadVariant() {
                try {
                    const urlParts = window.location.pathname.split("/");
                    const VariantID = urlParts[urlParts.length - 1];
                    console.log("VariantID", VariantID); //Вывод в консоль браузера

                    const response = await fetch(`/tasks/exec/${VariantID}`);
                    const variant = await response.json();


                    // Заголовок
                    console.log("variant", variant);
                    //document.getElementById("subtask-title").textContent = `${}`;

                    const container = document.getElementById("tasks-list");
                        variant.forEach(subtask => {
                            const li = document.createElement("li");
                            console.log("subtask", subtask);
                            li.innerHTML = `
                                <a>${subtask.Name}</a>`;

                            container.appendChild(li);
                        });
                    } catch (err) {
                        console.error("Ошибка при загрузке подзадач", err);
                    }
                }
            loadVariant()
    </script>
{% endblock %}
