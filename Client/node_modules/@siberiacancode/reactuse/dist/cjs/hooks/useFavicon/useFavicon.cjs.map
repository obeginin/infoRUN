{"version":3,"file":"useFavicon.cjs","sources":["../../../../src/hooks/useFavicon/useFavicon.ts"],"sourcesContent":["import type { Dispatch, SetStateAction } from 'react';\n\nimport { useState } from 'react';\n\nimport { useDidUpdate } from '../useDidUpdate/useDidUpdate';\nimport { useMount } from '../useMount/useMount';\n\n/** The use favicon return type */\nexport type UseFaviconReturn = [string, Dispatch<SetStateAction<string>>];\n\n/**\n * @name useFavicon\n * @description - Hook that manages the favicon\n * @category Browser\n *\n * @param {string} [initialFavicon] The initial favicon. If not provided, the current favicon will be used\n * @returns {UseFaviconReturn} An array containing the current favicon and a function to update the favicon\n *\n * @example\n * const { href, set } = useFavicon('https://www.google.com/favicon.ico');\n */\nexport const useFavicon = (initialHref?: string) => {\n  const [href, setHref] = useState(\n    initialHref ?? document.querySelector<HTMLLinkElement>(`link[rel*=\"icon\"]`)?.href\n  );\n\n  const injectFavicon = (favicon: string) => {\n    const link =\n      document.querySelector<HTMLLinkElement>(`link[rel*=\"icon\"]`) ||\n      document.createElement('link');\n    link.rel = 'icon';\n    link.href = favicon;\n    link.type = `image/${favicon.split('.').pop()}`;\n    document.head.append(link);\n  };\n\n  const set = (favicon: string) => {\n    setHref(favicon);\n    injectFavicon(favicon);\n  };\n\n  useMount(() => {\n    if (!initialHref) return;\n    injectFavicon(initialHref);\n  });\n\n  useDidUpdate(() => {\n    if (!initialHref) return;\n    setHref(initialHref);\n    injectFavicon(initialHref);\n  }, [initialHref]);\n\n  return { href, set } as const;\n};\n"],"names":["useFavicon","initialHref","href","setHref","useState","injectFavicon","favicon","link","set","useMount","useDidUpdate"],"mappings":"6LAqBaA,EAAcC,GAAyB,CAClD,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SACtBH,GAAe,SAAS,cAA+B,mBAAmB,GAAG,IAAA,EAGzEI,EAAiBC,GAAoB,CACzC,MAAMC,EACJ,SAAS,cAA+B,mBAAmB,GAC3D,SAAS,cAAc,MAAM,EAC/BA,EAAK,IAAM,OACXA,EAAK,KAAOD,EACZC,EAAK,KAAO,SAASD,EAAQ,MAAM,GAAG,EAAE,KAAK,GAC7C,SAAS,KAAK,OAAOC,CAAI,CAAA,EAGrBC,EAAOF,GAAoB,CAC/BH,EAAQG,CAAO,EACfD,EAAcC,CAAO,CAAA,EAGvBG,OAAAA,EAAAA,SAAS,IAAM,CACRR,GACLI,EAAcJ,CAAW,CAAA,CAC1B,EAEDS,EAAAA,aAAa,IAAM,CACZT,IACLE,EAAQF,CAAW,EACnBI,EAAcJ,CAAW,EAAA,EACxB,CAACA,CAAW,CAAC,EAET,CAAE,KAAAC,EAAM,IAAAM,CAAA,CACjB"}