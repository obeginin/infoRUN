{"version":3,"file":"useOffsetPagination.cjs","sources":["../../../../src/hooks/useOffsetPagination/useOffsetPagination.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\n/** The use offset pagination return type */\nexport interface UseOffsetPaginationOptions {\n  /** The initial page number */\n  initialPage?: number;\n  /** The number of items per page */\n  pageSize?: number;\n  /** The total number of items */\n  total?: number;\n  /** The callback function to be invoked when page changes */\n  onPageChange?: ({ page, pageSize }: { page: number; pageSize: number }) => void;\n  /** The callback function to be invoked when page count changes */\n  onPageCountChange?: ({ page, pageSize }: { page: number; pageSize: number }) => void;\n  /** The callback function to be invoked when page size changes */\n  onPageSizeChange?: ({ page, pageSize }: { page: number; pageSize: number }) => void;\n}\n\n/** The use offset pagination return type */\nexport interface UseOffsetPaginationReturn {\n  /** The number of items per page */\n  currentPageSize: number;\n  /** Whether the current page is the first page */\n  isFirstPage: boolean;\n  /** Whether the current page is the last page */\n  isLastPage: boolean;\n  /** The current page number */\n  page: number;\n  /** The total number of pages */\n  pageCount: number;\n  /** The callback function to go to the next page */\n  next: () => void;\n  /** The callback function to go to the previous page */\n  prev: () => void;\n  /** The callback function to set the current page */\n  set: (page: number) => void;\n}\n\n/**\n * @name useOffsetPagination\n * @description - Hook that defines the logic when pagination\n * @category State\n *\n * @param {UseOffsetPaginationOptions} options - The options for the hook\n * @param {number} [options.total] - The total number of items\n * @param {number} [options.pageSize] - The number of items per page\n * @param {number} [options.initialPage] - The current page\n * @param {({ page, pageSize }: { page: number; pageSize: number }) => void} [options.onPageChange] - The callback function to be invoked when page changes\n * @param {({ page, pageSize }: { page: number; pageSize: number }) => void} [options.onPageCountChange] - The callback function to be invoked when page count changes\n * @param {({ page, pageSize }: { page: number; pageSize: number }) => void} [options.onPageSizeChange] - The callback function to be invoked when page size changes\n * @returns {UseOffsetPaginationReturn} - The state of the hook\n *\n * @example\n * const { currentPage, currentPageSize, pageCount, isFirstPage, isLastPage, prev, next } = useOffsetPagination({\n *  total: 100,\n *  pageSize: 10,\n *  page: 1,\n *  onPageChange: (page) => {},\n *  onPageCountChange: (pageCount) => {},\n *  onPageSizeChange: (pageSize) => {}\n * });\n */\nexport const useOffsetPagination = ({\n  total = Number.POSITIVE_INFINITY,\n  pageSize = 10,\n  initialPage = 1,\n  onPageChange = () => {},\n  onPageCountChange = () => {},\n  onPageSizeChange = () => {}\n}: UseOffsetPaginationOptions = {}): UseOffsetPaginationReturn => {\n  const [page, setPage] = useState(initialPage);\n\n  const onPageChangeRef = useRef(onPageChange);\n  const onPageCountChangeRef = useRef(onPageCountChange);\n  const onPageSizeChangeRef = useRef(onPageSizeChange);\n\n  onPageChangeRef.current = onPageChange;\n  onPageCountChangeRef.current = onPageCountChange;\n  onPageSizeChangeRef.current = onPageSizeChange;\n\n  const pageCount = Math.max(1, Math.ceil(total / pageSize));\n\n  const isFirstPage = page === 1;\n  const isLastPage = page === pageCount;\n\n  const next = () => {\n    if (isLastPage) return onPageChange({ page: pageCount, pageSize });\n\n    setPage((prevPage) => {\n      const page = prevPage + 1;\n      onPageChange({ page, pageSize });\n      return page;\n    });\n  };\n\n  const prev = () => {\n    if (isFirstPage) return onPageChange({ page: 1, pageSize });\n\n    setPage((prevPage) => {\n      const page = prevPage - 1;\n      onPageChange({ page, pageSize });\n      return page;\n    });\n  };\n\n  const set = (page: number) => {\n    setPage(page);\n    onPageChange({ page, pageSize });\n  };\n\n  useEffect(() => {\n    onPageCountChangeRef.current({ page, pageSize });\n  }, [pageCount]);\n\n  useEffect(() => {\n    onPageSizeChangeRef.current({ page, pageSize });\n  }, [pageSize]);\n\n  return {\n    page,\n    set,\n    currentPageSize: pageSize,\n    isFirstPage,\n    isLastPage,\n    pageCount,\n    next,\n    prev\n  };\n};\n"],"names":["useOffsetPagination","total","pageSize","initialPage","onPageChange","onPageCountChange","onPageSizeChange","page","setPage","useState","onPageChangeRef","useRef","onPageCountChangeRef","onPageSizeChangeRef","pageCount","isFirstPage","isLastPage","next","prevPage","prev","set","useEffect"],"mappings":"yGA8DaA,EAAsB,CAAC,CAClC,MAAAC,EAAQ,OAAO,kBACf,SAAAC,EAAW,GACX,YAAAC,EAAc,EACd,aAAAC,EAAe,IAAM,CAAA,EACrB,kBAAAC,EAAoB,IAAM,CAAA,EAC1B,iBAAAC,EAAmB,IAAM,CAAA,CAC3B,EAAgC,KAAkC,CAChE,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAASN,CAAW,EAEtCO,EAAkBC,EAAAA,OAAOP,CAAY,EACrCQ,EAAuBD,EAAAA,OAAON,CAAiB,EAC/CQ,EAAsBF,EAAAA,OAAOL,CAAgB,EAEnDI,EAAgB,QAAUN,EAC1BQ,EAAqB,QAAUP,EAC/BQ,EAAoB,QAAUP,EAE9B,MAAMQ,EAAY,KAAK,IAAI,EAAG,KAAK,KAAKb,EAAQC,CAAQ,CAAC,EAEnDa,EAAcR,IAAS,EACvBS,EAAaT,IAASO,EAEtBG,EAAO,IAAM,CACjB,GAAID,EAAY,OAAOZ,EAAa,CAAE,KAAMU,EAAW,SAAAZ,EAAU,EAEjEM,EAASU,GAAa,CACpB,MAAMX,EAAOW,EAAW,EACxB,OAAAd,EAAa,CAAE,KAAAG,EAAM,SAAAL,CAAA,CAAU,EACxBK,CAAA,CACR,CAAA,EAGGY,EAAO,IAAM,CACjB,GAAIJ,EAAa,OAAOX,EAAa,CAAE,KAAM,EAAG,SAAAF,EAAU,EAE1DM,EAASU,GAAa,CACpB,MAAMX,EAAOW,EAAW,EACxB,OAAAd,EAAa,CAAE,KAAAG,EAAM,SAAAL,CAAA,CAAU,EACxBK,CAAA,CACR,CAAA,EAGGa,EAAOb,GAAiB,CAC5BC,EAAQD,CAAI,EACZH,EAAa,CAAE,KAAAG,EAAM,SAAAL,CAAA,CAAU,CAAA,EAGjCmB,OAAAA,EAAAA,UAAU,IAAM,CACdT,EAAqB,QAAQ,CAAE,KAAAL,EAAM,SAAAL,CAAA,CAAU,CAAA,EAC9C,CAACY,CAAS,CAAC,EAEdO,EAAAA,UAAU,IAAM,CACdR,EAAoB,QAAQ,CAAE,KAAAN,EAAM,SAAAL,CAAA,CAAU,CAAA,EAC7C,CAACA,CAAQ,CAAC,EAEN,CACL,KAAAK,EACA,IAAAa,EACA,gBAAiBlB,EACjB,YAAAa,EACA,WAAAC,EACA,UAAAF,EACA,KAAAG,EACA,KAAAE,CAAA,CAEJ"}