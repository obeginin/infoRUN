"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("react"),k=require("../useRerender/useRerender.cjs"),V=u=>{const c=u?.initialValue??"",t=i.useRef(null),l=i.useRef(!1),o=k.useRerender(),[v,f]=i.useState(!1),[g,a]=i.useState(u?.initialTouched??!1),[y,r]=i.useState(void 0),h=()=>t.current?.type==="radio"||t.current?.type==="checkbox"?t.current.checked:t.current?.value??c,s=e=>{if(t.current?.type==="radio"||t.current?.type==="checkbox")return t.current.checked=e,l.current?o():void 0;if(t.current.value=e,l.current)return o()},x=()=>{s(c),f(!1),a(!1),r(void 0)},b=()=>t.current.focus(),d=e=>{if(e.required&&!t.current.value)return r(e.required);if(e.minLength&&t.current.value.length<e.minLength.value)return r(e.minLength.message);if(e.maxLength&&t.current.value.length>e.maxLength.value)return r(e.maxLength.message);if(e.min&&Number(t.current.value)<e.min.value)return r(e.min.message);if(e.max&&Number(t.current.value)>e.max.value)return r(e.max.message);if(e.pattern&&!e.pattern.value.test(t.current.value))return r(e.pattern.message);if(e.validate){const n=e.validate(t.current.value);if(typeof n=="string")return r(n)}r(void 0)};return{register:e=>({ref:n=>{if(!t.current&&n){if(u?.autoFocus&&n.focus(),t.current=n,t.current.type==="radio"){t.current.defaultChecked=u?.initialValue===n.value;return}if(t.current.type==="checkbox"){t.current.defaultChecked=!!u?.initialValue;return}t.current.defaultValue=String(c),e&&u?.validateOnMount&&d(e)}},onChange:async()=>{if(l.current)return o();t.current.value!==c&&f(!0),v&&t.current.value===c&&f(!1),e&&u?.validateOnChange&&await d(e),e&&u?.validateOnBlur&&r(void 0)},onBlur:async()=>{e&&u?.validateOnBlur&&await d(e),a(!0)}}),dirty:v,touched:g,error:y,setError:r,clearError:()=>r(void 0),getValue:h,setValue:s,reset:x,watch:()=>(l.current=!0,h()),focus:b}};exports.useField=V;
//# sourceMappingURL=useField.cjs.map
