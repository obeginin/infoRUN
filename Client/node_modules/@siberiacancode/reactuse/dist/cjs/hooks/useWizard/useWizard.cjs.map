{"version":3,"file":"useWizard.cjs","sources":["../../../../src/hooks/useWizard/useWizard.ts"],"sourcesContent":["import { useState } from 'react';\n\nexport interface WizardItem<WizardStepId> {\n  id: WizardStepId;\n  nodes?: WizardStepId[];\n}\n\n/**\n * @name useWizard\n * @description - Hook that manages a wizard\n * @category State\n *\n * @param {WizardItem<WizardStepId>[]} map The map of the wizard\n * @param {WizardStepId} [initialStepId] The initial step id\n * @returns {UseWizardReturn<WizardStepId>} An object containing the current step id and functions to interact with the wizard\n *\n * @example\n * const { currentStepId, set, reset, back, next, history } = useWizard([\n *  { id: 'step1', nodes: ['step2', 'step3'] },\n *  { id: 'step2', nodes: ['step3'] },\n *  { id: 'step3', nodes: [] },\n * ])\n */\nexport const useWizard = <WizardStepId extends string>(\n  map: WizardItem<WizardStepId>[],\n  initialStepId?: WizardStepId\n) => {\n  const initialId = initialStepId ?? map[0].id;\n  const wizardMap = new Map(map.map((wizardItem) => [wizardItem.id, wizardItem]));\n  const [currentStepId, setCurrentStepId] = useState(initialId);\n  const [history, setHistory] = useState<WizardStepId[]>([initialId]);\n\n  const set = (id: WizardStepId) => {\n    if (!wizardMap.get(currentStepId)?.nodes?.includes(id))\n      throw new Error(`Can't go to ${id} from ${currentStepId}`);\n\n    setHistory([...history, id]);\n    setCurrentStepId(id);\n  };\n\n  const back = () => {\n    if (history.length === 1) return;\n\n    const previousStepId = history[history.length - 2];\n    if (!wizardMap.get(currentStepId)?.nodes?.includes(previousStepId))\n      throw new Error(`Can't go to ${previousStepId} from ${currentStepId}`);\n\n    setHistory(history.slice(0, -1));\n    setCurrentStepId(history[history.length - 2]);\n  };\n\n  const reset = () => {\n    setCurrentStepId(initialId);\n    setHistory([initialId]);\n  };\n\n  return { currentStepId, set, reset, back, history };\n};\n"],"names":["useWizard","map","initialStepId","initialId","wizardMap","wizardItem","currentStepId","setCurrentStepId","useState","history","setHistory","id","previousStepId"],"mappings":"yGAuBaA,EAAY,CACvBC,EACAC,IACG,CACH,MAAMC,EAAYD,GAAiBD,EAAI,CAAC,EAAE,GACpCG,EAAY,IAAI,IAAIH,EAAI,IAAKI,GAAe,CAACA,EAAW,GAAIA,CAAU,CAAC,CAAC,EACxE,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAASL,CAAS,EACtD,CAACM,EAASC,CAAU,EAAIF,EAAAA,SAAyB,CAACL,CAAS,CAAC,EA0BlE,MAAO,CAAE,cAAAG,EAAe,IAxBXK,GAAqB,CAChC,GAAI,CAACP,EAAU,IAAIE,CAAa,GAAG,OAAO,SAASK,CAAE,EACnD,MAAM,IAAI,MAAM,eAAeA,CAAE,SAASL,CAAa,EAAE,EAE3DI,EAAW,CAAC,GAAGD,EAASE,CAAE,CAAC,EAC3BJ,EAAiBI,CAAE,CAAA,EAmBQ,MALf,IAAM,CAClBJ,EAAiBJ,CAAS,EAC1BO,EAAW,CAACP,CAAS,CAAC,CAAA,EAGY,KAhBvB,IAAM,CACjB,GAAIM,EAAQ,SAAW,EAAG,OAE1B,MAAMG,EAAiBH,EAAQA,EAAQ,OAAS,CAAC,EACjD,GAAI,CAACL,EAAU,IAAIE,CAAa,GAAG,OAAO,SAASM,CAAc,EAC/D,MAAM,IAAI,MAAM,eAAeA,CAAc,SAASN,CAAa,EAAE,EAEvEI,EAAWD,EAAQ,MAAM,EAAG,EAAE,CAAC,EAC/BF,EAAiBE,EAAQA,EAAQ,OAAS,CAAC,CAAC,CAAA,EAQJ,QAAAA,CAAA,CAC5C"}