"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const P=require("react"),l="reactuse-url-search-params-event",d=(n="history")=>{const{search:i,hash:r}=window.location;let s="";if(n==="history"&&(s=i),n==="hash-params"&&(s=r.replace(/^#/,"")),n==="hash"){const t=r.indexOf("?");s=~t?r.slice(t):""}return new URLSearchParams(s)},g=(n,i)=>{const r=n.toString(),{search:s,hash:t}=window.location;if(i==="history")return`${r?`?${r}`:""}${t}`;if(i==="hash-params")return`${s}${r?`#${r}`:""}`;if(i==="hash"){const o=t.indexOf("?"),h=o>-1?t.slice(0,o):t;return`${s}${h}${r?`?${r}`:""}`}throw new Error("Invalid mode")},p=()=>window.dispatchEvent(new Event(l)),z=(n,i)=>{const r=typeof i=="object"&&i&&("serializer"in i||"deserializer"in i||"initialValue"in i||"mode"in i||"write"in i)?i:void 0,s=r?r?.initialValue:i,{mode:t="history",write:o="replace"}=r??{};if(typeof window>"u")return{value:s,remove:()=>{},set:()=>{}};const h=e=>r?.serializer?r.serializer(e):typeof e=="string"?e:JSON.stringify(e),S=e=>{if(r?.deserializer)return r.deserializer(e);if(!(e==="undefined"||e==="null"))try{return JSON.parse(e)}catch{return e}},u=(e,a,c,v="replace")=>{const f=d(c),$=a!==void 0?h?h(a):String(a):"";a===void 0?f.delete(e):f.set(e,$);const E=g(f,c);v==="replace"&&window.history.replaceState({},"",E),v==="push"&&window.history.pushState({},"",E),p()},[m,w]=P.useState(()=>{const a=d(t).get(n);return a===null&&s!==void 0?(u(n,s,t,o),s):a?S(a):void 0}),y=(e,a)=>{u(n,e,t,a?.write??o),w(e)},U=e=>{u(n,void 0,t,e?.write??o),w(void 0)};return P.useEffect(()=>{const e=()=>{const c=d(t).get(n);w(c?S(c):void 0)};return window.addEventListener(l,e),window.addEventListener("popstate",e),t!=="history"&&window.addEventListener("hashchange",e),()=>{window.removeEventListener(l,e),window.removeEventListener("popstate",e),t!=="history"&&window.removeEventListener("hashchange",e)}},[n,t]),{value:m,remove:U,set:y}};exports.URL_SEARCH_PARAMS_EVENT=l;exports.createQueryString=g;exports.dispatchUrlSearchParamsEvent=p;exports.getUrlSearchParams=d;exports.useUrlSearchParam=z;
//# sourceMappingURL=useUrlSearchParam.cjs.map
