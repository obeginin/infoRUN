"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const E=require("react"),n=require("../useUrlSearchParam/useUrlSearchParam.cjs"),v=t=>{const i=typeof t=="object"&&t&&("serializer"in t||"deserializer"in t||"initialValue"in t||"mode"in t||"write"in t)?t:void 0,u=i?i?.initialValue:t,{mode:s="history",write:h="replace"}=i,l=e=>i?.serializer?i.serializer(e):typeof e=="string"?e:JSON.stringify(e),U=e=>{if(i?.deserializer)return i.deserializer(e);if(e!=="undefined")try{return JSON.parse(e)}catch{return e}},S=(e,r,a="replace")=>{const o=new URLSearchParams;Object.entries(r).forEach(([y,d])=>{Array.isArray(d)?d.forEach(m=>o.set(y,l(m))):o.set(y,l(d))});const P=n.createQueryString(o,e);return a==="replace"&&window.history.replaceState({},"",P),a==="push"&&window.history.pushState({},"",P),o},c=e=>typeof e=="string"?c(new URLSearchParams(e)):e instanceof URLSearchParams?Array.from(e.entries()).reduce((r,[a,o])=>(r[a]=U(o),r),{}):e,[f,w]=E.useState(()=>{if(typeof window>"u")return u??{};const e=n.getUrlSearchParams(s),r={...u&&c(u),...c(e)};return S(s,r,h),r}),g=(e,r)=>{const a=S(s,{...f,...e},r?.write??h);w(c(a)),n.dispatchUrlSearchParamsEvent()};return E.useEffect(()=>{const e=()=>{const r=n.getUrlSearchParams(s);w(c(r))};return window.addEventListener(n.URL_SEARCH_PARAMS_EVENT,e),window.addEventListener("popstate",e),s!=="history"&&window.addEventListener("hashchange",e),()=>{window.removeEventListener(n.URL_SEARCH_PARAMS_EVENT,e),window.removeEventListener("popstate",e),s!=="history"&&window.removeEventListener("hashchange",e)}},[s]),{value:f,set:g}};exports.createQueryString=n.createQueryString;exports.dispatchUrlSearchParamsEvent=n.dispatchUrlSearchParamsEvent;exports.getUrlSearchParams=n.getUrlSearchParams;exports.useUrlSearchParams=v;
//# sourceMappingURL=useUrlSearchParams.cjs.map
