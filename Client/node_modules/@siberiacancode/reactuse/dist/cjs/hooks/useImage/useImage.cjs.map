{"version":3,"file":"useImage.cjs","sources":["../../../../src/hooks/useImage/useImage.ts"],"sourcesContent":["import type { UseQueryOptions, UseQueryReturn } from '../useQuery/useQuery';\n\nimport { useQuery } from '../useQuery/useQuery';\n\n/** The use image options */\nexport interface UseImageOptions {\n  /** The alt of the image */\n  alt?: string;\n  /** The class of the image */\n  class?: string;\n  /** The crossorigin of the image */\n  crossorigin?: string;\n  /** The loading of the image */\n  loading?: HTMLImageElement['loading'];\n  /** The referrer policy of the image */\n  referrerPolicy?: HTMLImageElement['referrerPolicy'];\n  /** The sizes of the image */\n  sizes?: string;\n  /** The srcset of the image */\n  srcset?: string;\n}\n\n/** The use image return type */\nexport type UseImageReturn = UseQueryReturn<HTMLImageElement>;\n\nconst loadImage = async (src: string, options: UseImageOptions = {}): Promise<HTMLImageElement> =>\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    const { srcset, sizes, class: className, loading, crossorigin, referrerPolicy } = options;\n\n    img.src = src;\n    if (srcset) img.srcset = srcset;\n    if (sizes) img.sizes = sizes;\n    if (className) img.className = className;\n    if (loading) img.loading = loading;\n    if (crossorigin) img.crossOrigin = crossorigin;\n\n    if (referrerPolicy) img.referrerPolicy = referrerPolicy;\n\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n\n/**\n * @name useImage\n * @description - Hook that load an image in the browser\n * @category Elements\n *\n * @param {string} src The source of the image\n * @param {string} [options.srcset] The srcset of the image\n * @param {string} [options.sizes] The sizes of the image\n * @param {string} [options.alt] The alt of the image\n * @param {string} [options.class] The class of the image\n * @param {HTMLImageElement['loading']} [options.loading] The loading of the image\n * @param {string} [options.crossorigin] The crossorigin of the image\n * @param {HTMLImageElement['referrerPolicy']} [options.referrerPolicy] The referrerPolicy of the image\n * @param {DependencyList} [useQueryOptions.keys] The dependencies for the hook\n * @param {(data: Data) => void} [useQueryOptions.onSuccess] The callback function to be invoked on success\n * @param {(error: Error) => void} [useQueryOptions.onError] The callback function to be invoked on error\n * @param {number} [useQueryOptions.refetchInterval] The refetch interval\n * @param {boolean | number} [useQueryOptions.retry] The retry count of requests\n * @returns {UseImageReturn} An object with the state of the image\n *\n * @example\n * const { data, isLoading, isError, isSuccess, error, refetch, isRefetching } = useImage('https://example.com/image.png');\n */\nexport const useImage = (\n  src: string,\n  options?: UseImageOptions,\n  useQueryOptions: Omit<\n    UseQueryOptions<HTMLImageElement, HTMLImageElement>,\n    'initialData' | 'placeholderData' | 'select'\n  > = {}\n) =>\n  useQuery(() => loadImage(src, options), {\n    keys: [src, ...(useQueryOptions.keys ?? [])],\n    ...useQueryOptions\n  });\n"],"names":["loadImage","src","options","resolve","reject","img","srcset","sizes","className","loading","crossorigin","referrerPolicy","useImage","useQueryOptions","useQuery"],"mappings":"4HAyBMA,EAAY,MAAOC,EAAaC,EAA2B,CAAA,IAC/D,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/B,MAAMC,EAAM,IAAI,MACV,CAAE,OAAAC,EAAQ,MAAAC,EAAO,MAAOC,EAAW,QAAAC,EAAS,YAAAC,EAAa,eAAAC,GAAmBT,EAElFG,EAAI,IAAMJ,EACNK,MAAY,OAASA,GACrBC,MAAW,MAAQA,GACnBC,MAAe,UAAYA,GAC3BC,MAAa,QAAUA,GACvBC,MAAiB,YAAcA,GAE/BC,MAAoB,eAAiBA,GAEzCN,EAAI,OAAS,IAAMF,EAAQE,CAAG,EAC9BA,EAAI,QAAUD,CAChB,CAAC,EAyBUQ,EAAW,CACtBX,EACAC,EACAW,EAGI,CAAA,IAEJC,EAAAA,SAAS,IAAMd,EAAUC,EAAKC,CAAO,EAAG,CACtC,KAAM,CAACD,EAAK,GAAIY,EAAgB,MAAQ,CAAA,CAAG,EAC3C,GAAGA,CACL,CAAC"}