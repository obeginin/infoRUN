"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("react"),m=require("../useRefState/useRefState.cjs"),y=require("../../utils/helpers/isTarget.cjs"),p=require("../../utils/helpers/getElement.cjs"),D=(...r)=>{const n=typeof navigator<"u"&&"mediaDevices"in navigator&&!!navigator.mediaDevices&&"getDisplayMedia"in navigator.mediaDevices,i=y.isTarget(r[0])?r[0]:void 0,o=r[1]?r[1]:r[0],g=o?.immediately??!1,[d,f]=u.useState(!1),s=u.useRef(null),t=u.useRef(null),a=m.useRefState(),c=()=>{!t.current||!n||!s.current||(f(!1),s.current.srcObject=null,t.current.getTracks().forEach(e=>e.stop()),t.current=null)},l=async()=>{if(!n||!s.current)return;const e=await navigator.mediaDevices.getDisplayMedia({video:o?.video,audio:o?.audio});return f(!0),t.current=e,s.current.srcObject=e,e.getTracks().forEach(v=>v.onended=c),e};return u.useEffect(()=>{if(!n||!i&&!a.state)return;const e=i?p.getElement(i):a.current;if(e&&(s.current=e,!!g))return l(),()=>{c()}},[i,a.state]),i?{stream:t.current,sharing:d,supported:n,start:l,stop:c}:{stream:t.current,sharing:d,supported:n,start:l,stop:c,ref:a}};exports.useDisplayMedia=D;
//# sourceMappingURL=useDisplayMedia.cjs.map
