"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("react"),c="reactuse-storage",u=t=>window.dispatchEvent(new StorageEvent(c,t)),g=(t,n,o)=>{const r=t.getItem(n);t.setItem(n,o),u({key:n,oldValue:r,newValue:o,storageArea:t})},V=(t,n)=>{const o=t.getItem(n);t.removeItem(n),u({key:n,oldValue:o,newValue:null,storageArea:t})},f=(t,n)=>{const o=t.getItem(n);if(o)return o},z=(t,n)=>{const o=typeof n=="object"&&n&&("serializer"in n||"deserializer"in n||"initialValue"in n||"storage"in n)?n:void 0,r=o?o?.initialValue:n;if(typeof window>"u")return{value:typeof r=="function"?r():r,set:()=>{},remove:()=>{}};const a=e=>o?.serializer?o.serializer(e):typeof e=="string"?e:JSON.stringify(e),i=o?.storage??window?.localStorage,v=e=>g(i,t,a(e)),S=()=>V(i,t),d=e=>{if(o?.deserializer)return o.deserializer(e);if(e!=="undefined")try{return JSON.parse(e)}catch{return e}},[w,E]=l.useState(()=>{const e=f(i,t);if(e===void 0&&r!==void 0){const s=typeof r=="function"?r():r;return g(i,t,a(s)),s}return e?d(e):void 0});return l.useEffect(()=>{const e=()=>{const s=f(i,t);E(s?d(s):void 0)};return window.addEventListener(c,e),()=>window.removeEventListener(c,e)},[t]),{value:w,set:v,remove:S}};exports.STORAGE_EVENT=c;exports.dispatchStorageEvent=u;exports.useStorage=z;
//# sourceMappingURL=useStorage.cjs.map
