"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const k=require("react"),u=(r,t)=>{switch(t.type){case"SET":{const{value:n,capacity:e}=t.payload,o=[...r.history.slice(0,r.currentIndex+1),n];o.length>e&&o.shift();const c=[r.history,...r.undoStack];return c.length>e&&c.pop(),{history:o,currentIndex:o.length-1,undoStack:c,redoStack:[]}}case"UNDO":return r.undoStack.length===0?r:{history:r.undoStack[0],currentIndex:r.undoStack[0].length-1,undoStack:r.undoStack.slice(1),redoStack:[r.history,...r.redoStack]};case"REDO":return r.redoStack.length===0?r:{history:r.redoStack[0],currentIndex:r.redoStack[0].length-1,undoStack:[r.history,...r.undoStack],redoStack:r.redoStack.slice(1)};case"BACK":{const{steps:n}=t.payload;return{...r,currentIndex:Math.max(0,r.currentIndex-n)}}case"FORWARD":{const{steps:n}=t.payload;return{...r,currentIndex:Math.min(r.currentIndex+n,r.history.length-1)}}case"RESET":{const{initialValue:n,capacity:e}=t.payload;if(r.history.length===1)return r;const o=[r.history,...r.undoStack];return o.length>e&&o.pop(),{history:[n],currentIndex:0,undoStack:o,redoStack:[]}}default:throw new Error("Unsupported action type")}},p=(r,t=10)=>{const[n,e]=k.useReducer(u,{history:[r],currentIndex:0,undoStack:[],redoStack:[]}),o=n.history[n.currentIndex],c=n.undoStack.length>0,a=n.redoStack.length>0,s=d=>e({type:"SET",payload:{value:d,capacity:t}}),y=()=>e({type:"UNDO"}),i=()=>e({type:"REDO"}),S=(d=1)=>e({type:"BACK",payload:{steps:d}}),h=(d=1)=>e({type:"FORWARD",payload:{steps:d}}),l=()=>e({type:"RESET",payload:{initialValue:r,capacity:t}});return{history:n.history,value:o,set:s,index:n.currentIndex,back:S,forward:h,reset:l,undo:y,redo:i,canUndo:c,canRedo:a}};exports.stateHistoryReducer=u;exports.useStateHistory=p;
//# sourceMappingURL=useStateHistory.cjs.map
