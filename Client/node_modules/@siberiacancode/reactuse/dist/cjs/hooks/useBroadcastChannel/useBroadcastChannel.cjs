"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react"),p=(s,d)=>{const o=typeof window<"u"&&"BroadcastChannel"in window,[l,c]=t.useState(!1),[i,f]=t.useState(),[g,v]=t.useState(),e=t.useRef(void 0);t.useEffect(()=>{if(!o)return;e.current=new BroadcastChannel(s);const r=n=>{f(n.data),d?.(n.data)},a=n=>v(n),u=()=>c(!0);return e.current.addEventListener("message",r),e.current.addEventListener("messageerror",a),e.current.addEventListener("close",u),()=>{e.current&&(e.current.removeEventListener("message",r),e.current.removeEventListener("messageerror",a),e.current.removeEventListener("close",u),e.current.close())}},[s]);const E=r=>{console.log("post",r,e.current),e.current&&e.current.postMessage(r)},m=()=>{e.current&&(e.current.close(),c(!0))};return{supported:o,channel:e.current,data:i,post:E,close:m,error:g,closed:l}};exports.useBroadcastChannel=p;
//# sourceMappingURL=useBroadcastChannel.cjs.map
