"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react"),I=require("../useRefState/useRefState.cjs"),J=require("../../utils/helpers/isTarget.cjs"),K=require("../../utils/helpers/getElement.cjs"),V=r=>{let a=[];for(let s=0;s<r.length;++s)a=[...a,[r.start(s),r.end(s)]];return a},N=(...r)=>{const a=J.isTarget(r[0])?r[0]:void 0,s=a?typeof r[1]=="object"?r[1]:{src:r[1]}:typeof r[0]=="object"?r[0]:{src:r[0]},u=I.useRefState(),t=n.useRef(null),[c,o]=n.useState(!1),[i,d]=n.useState(0),[j,l]=n.useState(0),[x,m]=n.useState(!1),[D,W]=n.useState(!1),[B,O]=n.useState([]),[U,v]=n.useState(!1),[z,g]=n.useState(!1),[F,f]=n.useState(1),[G,E]=n.useState(!1),[H,y]=n.useState(1);n.useEffect(()=>{const e=a?K.getElement(a):u.current;if(!e)return;t.current=e,e.src=s.src,s.type&&e.setAttribute("type",s.type),s.media&&e.setAttribute("media",s.media),d(e.duration),l(e.currentTime),o(!1),g(e.ended),E(e.muted),y(e.volume),f(e.playbackRate);const p=()=>{o(!0),v(!1)},k=()=>o(!1),h=()=>W(!0),b=()=>v(!0),R=()=>m(!0),T=()=>m(!1),M=()=>{o(!1),g(!0)},P=()=>d(e.duration),q=()=>l(e.currentTime),w=()=>{E(e.muted),y(e.volume)},A=()=>f(e.playbackRate),C=()=>O(V(e.buffered));return e.addEventListener("playing",p),e.addEventListener("pause",k),e.addEventListener("waiting",h),e.addEventListener("progress",C),e.addEventListener("stalled",b),e.addEventListener("seeking",R),e.addEventListener("seeked",T),e.addEventListener("ended",M),e.addEventListener("loadedmetadata",P),e.addEventListener("timeupdate",q),e.addEventListener("volumechange",w),e.addEventListener("ratechange",A),()=>{e.removeEventListener("playing",p),e.removeEventListener("pause",k),e.removeEventListener("waiting",h),e.removeEventListener("progress",C),e.removeEventListener("stalled",b),e.removeEventListener("seeking",R),e.removeEventListener("seeked",T),e.removeEventListener("ended",M),e.removeEventListener("loadedmetadata",P),e.removeEventListener("timeupdate",q),e.removeEventListener("volumechange",w),e.removeEventListener("ratechange",A)}},[a,u.state]);const L=async()=>{const e=t.current;e&&await e.play()},S=()=>{t.current&&t.current.pause()};return{playing:c,duration:i,currentTime:j,seeking:x,waiting:D,buffered:B,stalled:U,ended:z,playbackRate:F,muted:G,volume:H,play:L,pause:S,toggle:async()=>c?S():L(),seek:e=>{t.current&&(t.current.currentTime=Math.min(Math.max(e,0),i))},changeVolume:e=>{t.current&&(t.current.volume=Math.min(Math.max(e,0),1))},mute:()=>{t.current&&(t.current.muted=!0)},unmute:()=>{t.current&&(t.current.muted=!1)},changePlaybackRate:e=>{t.current&&(t.current.playbackRate=e)},...!a&&{ref:u}}};exports.timeRangeToArray=V;exports.useMediaControls=N;
//# sourceMappingURL=useMediaControls.cjs.map
