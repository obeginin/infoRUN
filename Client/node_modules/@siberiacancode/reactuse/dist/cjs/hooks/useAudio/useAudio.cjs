"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("react"),h=(i,r={})=>{const[l,s]=u.useState(!1),[m,d]=u.useState(r.volume??1),[v,y]=u.useState(r.playbackRate??1),t=u.useRef(null);u.useEffect(()=>{const e=new Audio(i);e.volume=m,e.playbackRate=v,t.current=e,r.immediately&&e.play();const n=()=>s(!0),c=()=>s(!1),a=()=>s(!1),p=()=>{},f=()=>d(e.volume),E=()=>y(e.playbackRate);return e.addEventListener("play",n),e.addEventListener("pause",c),e.addEventListener("ended",a),e.addEventListener("timeupdate",p),e.addEventListener("volumechange",f),e.addEventListener("ratechange",E),()=>{e.removeEventListener("play",n),e.removeEventListener("pause",c),e.removeEventListener("ended",a),e.removeEventListener("timeupdate",p),e.removeEventListener("volumechange",f),e.removeEventListener("ratechange",E),e.pause(),e.remove()}},[i]);const o=()=>{t.current&&(t.current.pause(),t.current.currentTime=0)};return{play:async e=>{if(!t.current)return;if(r.interrupt&&o(),!e||!r.sprite?.[e]){await t.current.play();return}const[n,c]=r.sprite[e];t.current.currentTime=n,await t.current.play();const a=()=>{t.current&&(t.current.currentTime>=c&&o(),l&&requestAnimationFrame(a))};requestAnimationFrame(a)},pause:()=>t.current?.pause(),stop:o,playing:l,setVolume:e=>{if(!t.current)return;const n=Math.max(0,Math.min(1,e));t.current.volume=n,d(n)},volume:m,changePlaybackRate:e=>{if(!t.current)return;const n=Math.max(.5,Math.min(2,e));t.current.playbackRate=n,y(n)},playbackRate:v}};exports.useAudio=h;
//# sourceMappingURL=useAudio.cjs.map
