{"version":3,"file":"usePostMessage.cjs","sources":["../../../../src/hooks/usePostMessage/usePostMessage.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nexport type UsePostMessageReturn<Message> = (message: Message) => void;\n\n/**\n * @name usePostMessage\n * @description - Hook that allows you to receive messages from other origins\n * @category Browser\n *\n * @overload\n * @template Message The message data type\n * @param {string | string[]} origin The origin of the message\n * @param {(message: Message) => Message} callback callback to get received message\n * @returns {(message: Message) => void} An object containing the current message\n *\n * @example\n * const postMessage = usePostMessage();\n */\nexport const usePostMessage = <Message>(\n  origin: string | '*' | string[],\n  callback: (message: Message, event: MessageEvent<Message>) => void\n): UsePostMessageReturn<Message> => {\n  const internalCallbackRef = useRef(callback);\n  internalCallbackRef.current = callback;\n\n  useEffect(() => {\n    const onMessage = (event: MessageEvent<Message>) => {\n      if (\n        (Array.isArray(origin) && (!origin.includes(event.origin) || !origin.includes('*'))) ||\n        (event.origin !== origin && origin !== '*')\n      )\n        return;\n\n      internalCallbackRef.current(event.data as Message, event);\n    };\n\n    window.addEventListener('message', onMessage);\n    return () => window.removeEventListener('message', onMessage);\n  }, []);\n\n  const postMessage = (message: Message) => {\n    if (Array.isArray(origin)) {\n      origin.forEach((origin) => window.postMessage(message, origin));\n      return;\n    }\n\n    window.postMessage(message, origin);\n  };\n\n  return postMessage;\n};\n"],"names":["usePostMessage","origin","callback","internalCallbackRef","useRef","useEffect","onMessage","event","message"],"mappings":"yGAkBaA,EAAiB,CAC5BC,EACAC,IACkC,CAClC,MAAMC,EAAsBC,EAAAA,OAAOF,CAAQ,EAC3C,OAAAC,EAAoB,QAAUD,EAE9BG,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAaC,GAAiC,CAE/C,MAAM,QAAQN,CAAM,IAAM,CAACA,EAAO,SAASM,EAAM,MAAM,GAAK,CAACN,EAAO,SAAS,GAAG,IAChFM,EAAM,SAAWN,GAAUA,IAAW,KAIzCE,EAAoB,QAAQI,EAAM,KAAiBA,CAAK,CAAA,EAG1D,cAAO,iBAAiB,UAAWD,CAAS,EACrC,IAAM,OAAO,oBAAoB,UAAWA,CAAS,CAAA,EAC3D,EAAE,EAEgBE,GAAqB,CACxC,GAAI,MAAM,QAAQP,CAAM,EAAG,CACzBA,EAAO,QAASA,GAAW,OAAO,YAAYO,EAASP,CAAM,CAAC,EAC9D,MAAA,CAGF,OAAO,YAAYO,EAASP,CAAM,CAAA,CAItC"}