{"version":3,"file":"useFavicon.mjs","sources":["../../../../src/hooks/useFavicon/useFavicon.ts"],"sourcesContent":["import type { Dispatch, SetStateAction } from 'react';\n\nimport { useState } from 'react';\n\nimport { useDidUpdate } from '../useDidUpdate/useDidUpdate';\nimport { useMount } from '../useMount/useMount';\n\n/** The use favicon return type */\nexport type UseFaviconReturn = [string, Dispatch<SetStateAction<string>>];\n\n/**\n * @name useFavicon\n * @description - Hook that manages the favicon\n * @category Browser\n *\n * @param {string} [initialFavicon] The initial favicon. If not provided, the current favicon will be used\n * @returns {UseFaviconReturn} An array containing the current favicon and a function to update the favicon\n *\n * @example\n * const { href, set } = useFavicon('https://www.google.com/favicon.ico');\n */\nexport const useFavicon = (initialHref?: string) => {\n  const [href, setHref] = useState(\n    initialHref ?? document.querySelector<HTMLLinkElement>(`link[rel*=\"icon\"]`)?.href\n  );\n\n  const injectFavicon = (favicon: string) => {\n    const link =\n      document.querySelector<HTMLLinkElement>(`link[rel*=\"icon\"]`) ||\n      document.createElement('link');\n    link.rel = 'icon';\n    link.href = favicon;\n    link.type = `image/${favicon.split('.').pop()}`;\n    document.head.append(link);\n  };\n\n  const set = (favicon: string) => {\n    setHref(favicon);\n    injectFavicon(favicon);\n  };\n\n  useMount(() => {\n    if (!initialHref) return;\n    injectFavicon(initialHref);\n  });\n\n  useDidUpdate(() => {\n    if (!initialHref) return;\n    setHref(initialHref);\n    injectFavicon(initialHref);\n  }, [initialHref]);\n\n  return { href, set } as const;\n};\n"],"names":["useFavicon","initialHref","href","setHref","useState","injectFavicon","favicon","link","set","useMount","useDidUpdate"],"mappings":";;;AAqBO,MAAMA,IAAa,CAACC,MAAyB;AAClD,QAAM,CAACC,GAAMC,CAAO,IAAIC;AAAA,IACtBH,KAAe,SAAS,cAA+B,mBAAmB,GAAG;AAAA,EAAA,GAGzEI,IAAgB,CAACC,MAAoB;AACzC,UAAMC,IACJ,SAAS,cAA+B,mBAAmB,KAC3D,SAAS,cAAc,MAAM;AAC/B,IAAAA,EAAK,MAAM,QACXA,EAAK,OAAOD,GACZC,EAAK,OAAO,SAASD,EAAQ,MAAM,GAAG,EAAE,KAAK,IAC7C,SAAS,KAAK,OAAOC,CAAI;AAAA,EAAA,GAGrBC,IAAM,CAACF,MAAoB;AAC/B,IAAAH,EAAQG,CAAO,GACfD,EAAcC,CAAO;AAAA,EAAA;AAGvB,SAAAG,EAAS,MAAM;AACb,IAAKR,KACLI,EAAcJ,CAAW;AAAA,EAAA,CAC1B,GAEDS,EAAa,MAAM;AACjB,IAAKT,MACLE,EAAQF,CAAW,GACnBI,EAAcJ,CAAW;AAAA,EAAA,GACxB,CAACA,CAAW,CAAC,GAET,EAAE,MAAAC,GAAM,KAAAM,EAAA;AACjB;"}