{"version":3,"file":"useDeviceMotion.mjs","sources":["../../../../src/hooks/useDeviceMotion/useDeviceMotion.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nimport { throttle } from '@/utils/helpers';\n\nexport interface UseDeviceMotionReturn {\n  acceleration: DeviceMotionEventAcceleration;\n  accelerationIncludingGravity: DeviceMotionEventAcceleration;\n  interval: DeviceMotionEvent['interval'];\n  rotationRate: DeviceMotionEventRotationRate;\n}\n\nexport interface UseDeviceMotionParams {\n  /** The delay in milliseconds */\n  delay?: number;\n  /** Whether to enable the hook */\n  enabled?: boolean;\n  /** The callback function to be invoked */\n  callback?: (event: DeviceMotionEvent) => void;\n}\n\n/**\n * @name useDeviceMotion\n * @description - Hook that work with device motion\n * @category Utilities\n *\n * @browserapi DeviceMotionEvent https://developer.mozilla.org/en-US/docs/Web/API/Window/DeviceMotionEvent\n *\n * @param {number} [delay=1000] The delay in milliseconds\n * @param {(event: DeviceMotionEvent) => void} [callback] The callback function to be invoked\n * @param {boolean} [enabled=true] Whether to enable the hook\n * @returns {UseDeviceMotionReturn} The device motion data and interval\n *\n * @example\n * const { interval, rotationRate, acceleration, accelerationIncludingGravity } = useDeviceMotion();\n */\nexport const useDeviceMotion = (params?: UseDeviceMotionParams) => {\n  const enabled = params?.enabled ?? true;\n  const delay = params?.delay ?? 1000;\n  const [value, setValue] = useState<UseDeviceMotionReturn>({\n    interval: 0,\n    rotationRate: { alpha: null, beta: null, gamma: null },\n    acceleration: { x: null, y: null, z: null },\n    accelerationIncludingGravity: { x: null, y: null, z: null }\n  });\n  const internalCallbackRef = useRef(params?.callback);\n  internalCallbackRef.current = params?.callback;\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    const onDeviceMotion = throttle<[DeviceMotionEvent]>((event) => {\n      internalCallbackRef.current?.(event);\n\n      setValue({\n        interval: event.interval,\n        rotationRate: {\n          ...value.rotationRate,\n          ...event.rotationRate\n        },\n        acceleration: {\n          ...value.acceleration,\n          ...event.acceleration\n        },\n        accelerationIncludingGravity: {\n          ...value.accelerationIncludingGravity,\n          ...event.accelerationIncludingGravity\n        }\n      });\n    }, delay);\n\n    window.addEventListener('devicemotion', onDeviceMotion);\n\n    return () => {\n      window.removeEventListener('devicemotion', onDeviceMotion);\n    };\n  }, [delay, enabled]);\n\n  return value;\n};\n"],"names":["useDeviceMotion","params","enabled","delay","value","setValue","useState","internalCallbackRef","useRef","useEffect","onDeviceMotion","throttle","event"],"mappings":";;AAmCO,MAAMA,IAAkB,CAACC,MAAmC;AACjE,QAAMC,IAAUD,GAAQ,WAAW,IAC7BE,IAAQF,GAAQ,SAAS,KACzB,CAACG,GAAOC,CAAQ,IAAIC,EAAgC;AAAA,IACxD,UAAU;AAAA,IACV,cAAc,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,KAAA;AAAA,IAChD,cAAc,EAAE,GAAG,MAAM,GAAG,MAAM,GAAG,KAAA;AAAA,IACrC,8BAA8B,EAAE,GAAG,MAAM,GAAG,MAAM,GAAG,KAAA;AAAA,EAAK,CAC3D,GACKC,IAAsBC,EAAOP,GAAQ,QAAQ;AACnD,SAAAM,EAAoB,UAAUN,GAAQ,UAEtCQ,EAAU,MAAM;AACd,QAAI,CAACP,EAAS;AAEd,UAAMQ,IAAiBC,EAA8B,CAACC,MAAU;AAC9D,MAAAL,EAAoB,UAAUK,CAAK,GAEnCP,EAAS;AAAA,QACP,UAAUO,EAAM;AAAA,QAChB,cAAc;AAAA,UACZ,GAAGR,EAAM;AAAA,UACT,GAAGQ,EAAM;AAAA,QAAA;AAAA,QAEX,cAAc;AAAA,UACZ,GAAGR,EAAM;AAAA,UACT,GAAGQ,EAAM;AAAA,QAAA;AAAA,QAEX,8BAA8B;AAAA,UAC5B,GAAGR,EAAM;AAAA,UACT,GAAGQ,EAAM;AAAA,QAAA;AAAA,MACX,CACD;AAAA,IAAA,GACAT,CAAK;AAER,kBAAO,iBAAiB,gBAAgBO,CAAc,GAE/C,MAAM;AACX,aAAO,oBAAoB,gBAAgBA,CAAc;AAAA,IAAA;AAAA,EAC3D,GACC,CAACP,GAAOD,CAAO,CAAC,GAEZE;AACT;"}