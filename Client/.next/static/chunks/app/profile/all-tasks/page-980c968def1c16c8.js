(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4695],{189:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var n=r(5155),s=r(539),a=r.n(s);let l=e=>{let{children:t,onClick:r,border:s="primary",ref:l}=e;return(0,n.jsx)("div",{ref:l,className:a().task,onClick:r,style:{border:"1px solid var(--".concat(s,")")},children:t})}},362:e=>{e.exports={link:"ALink_link__OwqEr"}},422:e=>{e.exports={spinner:"LoadingSpinner_spinner__zVFoh",loader:"LoadingSpinner_loader__ykQAA",rotate:"LoadingSpinner_rotate__azkfj",ball1:"LoadingSpinner_ball1__nu5rH",ball2:"LoadingSpinner_ball2__Z73WY"}},539:e=>{e.exports={task:"Task_task__D6uC8"}},2032:(e,t,r)=>{Promise.resolve().then(r.bind(r,4786))},2953:e=>{e.exports={breadCrumb:"BreadCrumb_breadCrumb__zNAyP",span:"BreadCrumb_span__jPz6L"}},3494:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(5155),s=r(2115),a=r(5054),l=r.n(a);let i=e=>{let{type:t="text",label:r,value:a,onChange:i,radius:c="32px",error_text:o,required:u=!1}=e,[d,_]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:l().input__container,children:[(0,n.jsx)("input",{required:u,type:"password"===t&&d?"text":t,className:l().input+"".concat(o?" "+l().error:""),value:a,onChange:i,style:{borderRadius:c}}),(0,n.jsx)("label",{className:l().label,children:r}),o&&(0,n.jsx)("label",{className:l().error__label,children:o}),"password"===t&&(0,n.jsx)("button",{type:"button",className:l().password__toggle,onClick:()=>{_(!d)},"aria-label":d?"Скрыть пароль":"Показать пароль",children:(0,n.jsx)("i",{className:"pi ".concat(d?"pi-eye":"pi-eye-slash")})})]})}},4125:e=>{e.exports={profile__dashboard__content:"allTasks_profile__dashboard__content__T7cHl",progress__item:"allTasks_progress__item__sE4vw",content:"allTasks_content__J7sI_",task:"allTasks_task__rN0Ya",skeleton__item:"allTasks_skeleton__item__piwM3",image:"allTasks_image__ceozn",answer:"allTasks_answer__4LeYQ",collapsible:"allTasks_collapsible__UPUKZ",open:"allTasks_open__SzbQi",collapsibleInner:"allTasks_collapsibleInner__cyOZM",filter__buttons:"allTasks_filter__buttons__mJ7bs"}},4291:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});class n{static async getStudentTask(e,t,r,n){return(await fetch("".concat("https://info-run.ru","/api/students_subtasks/").concat(e,"?limit=").concat(r,"&offset=").concat(n),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).json()}static async getAllTasks(e,t){return(await fetch("".concat("https://info-run.ru","/api/students_subtasks/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).json()}static async getTask(e,t,r){return(await fetch("".concat("https://info-run.ru","\n      /api/students_subtasks/").concat(e,"/StudentTask/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}})).json()}static async checkAnswer(e,t,r){return(await fetch("".concat("https://info-run.ru","/api/students_subtasks/check-answer/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subtaskId:e,studentId:t,student_answer:r})})).json()}}},4786:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var n=r(5155),s=r(2115),a=r(4125),l=r.n(a),i=r(8056),c=r(4291);let o="u">typeof window?s.useLayoutEffect:s.useEffect,u=e=>"number"==typeof e?e:+!!e,d=Symbol("target"),_=e=>"current"in e?e.current:"function"==typeof e.value?e.value():"string"==typeof e.value?document.querySelector(e.value):(e.value instanceof Document||e.value instanceof Window||e.value instanceof Element,e.value);var p=r(7364),h=r(362),f=r.n(h);let m=e=>{let{children:t,href:r,...s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("a",{href:r,...s,className:f().link,children:t})})};var b=r(7761),x=r.n(b);let g=e=>{let{direcrion:t="row",justifyContent:r="space-between",alignItems:s="center",children:a,...l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("ul",{style:{listStyle:"none",display:"flex",flexDirection:t,justifyContent:r,alignItems:s,gap:"20px"},...l,className:x().ul,children:a})})},j=e=>{let{children:t,...r}=e;return(0,n.jsx)("li",{...r,className:x().list,style:{fontFamily:"Lato"},children:t})};var y=r(2953),k=r.n(y);let v=e=>{let{prevPage:t,currentPage:r}=e;return(0,n.jsx)("div",{className:k().breadCrumb,children:(0,n.jsxs)(g,{direcrion:"row",justifyContent:"flex-start",alignItems:"flex-start",children:[(0,n.jsx)(j,{children:(0,n.jsx)(m,{href:"/",children:"Главная"})}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:k().span,children:" / "}),(0,n.jsx)(j,{children:(0,n.jsx)(m,{href:"/",children:t})})]}),(0,n.jsx)("span",{className:k().span,children:" / "}),(0,n.jsx)(j,{children:(0,n.jsx)(m,{href:"/",children:r})})]})})};var S=r(8045),w=r(6330),I=r(189),C=r(3208),T=r(6947),N=r(7814),E=r(3494);function A(){let e=localStorage.getItem("token"),t=(0,i.k)(e=>e.user),[r,a]=(0,s.useState)([]),[h,f]=(0,s.useState)(!1),[m,b]=(0,s.useState)(!0),[x,g]=(0,s.useState)(0),[j,y]=(0,s.useState)(null),[k,A]=(0,s.useState)(""),[D,P]=(0,s.useState)("Все"),[L,z]=(0,s.useState)(null),{isError:F,isSuccess:O}=((e,t)=>{let r,n=t?.enabled??!0,a=(0,s.useRef)(t?.retry?u(t.retry):0),l=(0,s.useRef)(!1),[i,c]=(0,s.useState)(!1),[d,_]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!1),[b,x]=(0,s.useState)(!!t?.placeholderData),[g,j]=(0,s.useState)(void 0),[y,k]=(0,s.useState)(t?.placeholderData),v=(0,s.useRef)(new AbortController),S=(0,s.useRef)(void 0),w=t?.keys??[],I=()=>{v.current.abort(),v.current=new AbortController},C=r=>{I(),c(!0),"init"===r&&(l.current=!0,_(!0)),"refetch"===r&&m(!0),e({signal:v.current.signal,keys:w}).then(e=>{let n=t?.select?t?.select(e):e;t?.onSuccess?.(n),k(n),x(!0),j(void 0),h(!1),c(!1),"init"===r&&_(!1),"refetch"===r&&m(!1)}).catch(e=>{if(a.current>0){a.current-=1;let n="function"==typeof t?.retryDelay?t?.retryDelay(a.current,e):t?.retryDelay;return n?void setTimeout(()=>C(r),n):C(r)}t?.onError?.(e),k(void 0),x(!1),j(e),h(!0),c(!1),"init"===r&&_(!1),"refetch"===r&&m(!1),a.current=t?.retry?u(t.retry):0}).finally(()=>{if(t?.refetchInterval){let e=setInterval(()=>{clearInterval(e),C("refetch")},t?.refetchInterval);S.current=e}})};return r=()=>{n&&C("init")},(0,s.useEffect)(r,[]),((e,t)=>{let r=(0,s.useRef)(!1);o(()=>()=>{r.current=!1},[]),o(()=>{if(r.current)return e();r.current=!0},t)})(()=>{n&&C(l.current?"refetch":"init")},[n,...w]),(0,s.useEffect)(()=>()=>{clearInterval(S.current)},[n,t?.refetchInterval,t?.retry,...w]),{abort:I,data:y,error:g,refetch:()=>C("refetch"),isFetching:i,isLoading:d,isError:p,isSuccess:b,isRefetching:f}})(()=>c.A.getStudentTask(null==t?void 0:t.ID,e,10,x).then(e=>e),{keys:[x,D],enabled:"Все"===D,onSuccess:e=>{a(t=>[...t,...e]),b(10===e.length),f(!1)},onError:()=>{f(!1)}});(0,s.useEffect)(()=>{if("Все"===D)return;f(!1),b(!1);let r=e=>{let t=e;switch(D){case"Выполненные":t=e.filter(e=>"Выполнено"===e.CompletionStatus);break;case"В процессе":t=e.filter(e=>"В процессе"===e.CompletionStatus);break;case"Не приступал":t=e.filter(e=>"Не приступал"===e.CompletionStatus||!e.CompletionStatus);break;default:t=e}a(t)};if(L&&L.length)return void r(L);c.A.getAllTasks(null==t?void 0:t.ID,e).then(e=>{z(e),r(e)}).catch(e=>console.log(e))},[D,L,null==t?void 0:t.ID,e]),(0,s.useEffect)(()=>{"Все"===D&&(a([]),g(0),b(!0),f(!1))},[D]);let{ref:R}=((...e)=>{let t,r="object"==typeof(t=e[0])&&("current"in t||t.type===d)?e[0]:void 0,n=r?"object"==typeof e[1]?e[1]:{onChange:e[1]}:"object"==typeof e[0]?e[0]:{onChange:e[0]},a=n?.onChange,l=n?.enabled??!0,[i,c]=(0,s.useState)(),o=(e=>{let[t,r]=(0,s.useState)(void 0),[n]=(0,s.useState)(()=>((e,t)=>{let r=e;function n(e){r!==e&&t(r=e)}return Object.defineProperty(n,"current",{get:()=>r,set(e){r!==e&&t(r=e)},configurable:!0,enumerable:!0}),n})(void 0,r));return n.state=t,n})(),u=(0,s.useRef)(a);return u.current=a,(0,s.useEffect)(()=>{if(!l||!r&&!o.state)return;let e=r?_(r):o.current;if(!e)return;let t=new IntersectionObserver(([e])=>{c(e),u.current?.(e)},{...n,root:n?.root?_(n.root):document});return t.observe(e),()=>{t.disconnect()}},[r,o.state,n?.rootMargin,n?.threshold,n?.root,l]),r?{entry:i,inView:!!i?.isIntersecting}:{ref:o,entry:i,inView:!!i?.isIntersecting}})({threshold:1,onChange:e=>{"Все"===D&&(e.isIntersecting&&m&&!h&&f(!0),g(e=>e+10))}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"app",children:[(0,n.jsx)(p.Header,{}),(0,n.jsx)(v,{currentPage:"Мои задачи",prevPage:"Личный кабинет"}),(0,n.jsx)("section",{children:(0,n.jsx)(S.K,{children:(0,n.jsxs)("div",{className:l().content,children:[(0,n.jsx)("div",{className:l().filter__buttons,children:["Все","Выполненные","В процессе","Не приступал"].map(e=>(0,n.jsx)(w.$,{onClick:()=>P(e),filled:D===e,outlined:D!==e,color:D===e?"white":"text",radius:"16px",children:e},e))}),O&&r.map((e,r)=>(0,n.jsxs)(I.Y,{border:"".concat("В процессе"===e.CompletionStatus?"warning":"Выполнено"===e.CompletionStatus?"success":"primary"),children:[(0,n.jsxs)(C.f,{children:[e.SubTaskID,": ",e.TaskTitle," ",e.VariantName]}),(0,n.jsx)(C.f,{children:e.Score}),(0,n.jsx)("i",{onClick:()=>y(j===r?null:r),className:"pi pi-angle-down ".concat(l().arrow)}),(0,n.jsx)("div",{className:"".concat(l().collapsible," ").concat(j===r?l().open:""),children:(0,n.jsx)("div",{className:l().collapsibleInner,children:(0,n.jsx)(S.K,{children:(0,n.jsxs)("div",{className:l().image,children:[(0,n.jsx)("img",{loading:"lazy",className:l().image,src:"".concat("https://info-run.ru","/").concat(e.ImagePath),alt:e.ImagePath?e.ImagePath:""}),(0,n.jsxs)("div",{className:l().answer,children:[(0,n.jsx)(E.p,{label:"Ответ",value:k,onChange:e=>A(e.target.value),radius:"16px"}),(0,n.jsx)(w.$,{onClick:()=>{var r;return r=e.SubTaskID,void(k&&r&&t&&(A(""),c.A.checkAnswer(r,t.ID,k).then(e=>e).catch(e=>console.log(e))))},radius:"16px",color:"white",filled:!0,children:"Отправить"})]})]})})})})]},r)),h&&Array(10).fill(0).map((e,t)=>(0,n.jsx)(I.Y,{children:(0,n.jsx)(N.y,{})},t)),F&&(0,n.jsx)(C.f,{children:"Произошла ошибка"}),(0,n.jsx)("div",{ref:R,style:{height:"1px",visibility:"hidden"}})]})})})]}),(0,n.jsx)(T.w,{})]})}},5054:e=>{e.exports={input__container:"Input_input__container__995Fx",label:"Input_label__dSg8c",error:"Input_error__fm0DP",input:"Input_input__MqBoX",error__label:"Input_error__label__P37Ti",password__toggle:"Input_password__toggle__FdkGg"}},7761:e=>{e.exports={list:"UlLi_list__5rBeg"}},7814:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var n=r(5155),s=r(422),a=r.n(s);let l=()=>(0,n.jsx)("div",{className:a().spinner,children:(0,n.jsx)("span",{className:a().loader})})}},e=>{e.O(0,[8382,6545,7446,7009,3068,4487,8441,5964,7358],()=>e(e.s=2032)),_N_E=e.O()}]);