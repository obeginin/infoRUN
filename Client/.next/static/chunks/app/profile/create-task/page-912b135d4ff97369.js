(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2733],{422:e=>{e.exports={spinner:"LoadingSpinner_spinner__zVFoh",loader:"LoadingSpinner_loader__ykQAA",rotate:"LoadingSpinner_rotate__azkfj",ball1:"LoadingSpinner_ball1__nu5rH",ball2:"LoadingSpinner_ball2__Z73WY"}},525:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});class a{static async login(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Login:e,Password:t})})).json()}static async loginV2(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login/v2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})})).json()}static async logout(e){return(await fetch("".concat("https://info-run.ru","/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async resetPassword(e){return(await fetch("".concat("https://info-run.ru","/api/auth/password_reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e})})).json()}static async resetPasswordWithToken(e,t,n){let a=await fetch("".concat("https://info-run.ru","/api/auth/password_reset_with_token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,new_password:t,repeat_new_password:n})});return a.status,a.json()}}},1152:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var a=n(5155),r=n(9624),s=n.n(r);let o=e=>{let{value:t,onChange:n,placeholder:r="Введите текст..."}=e;return(0,a.jsx)("textarea",{className:s().textarea,value:t,onChange:e=>n(e.target.value),placeholder:r,rows:4})}},2078:e=>{e.exports={link:"AnimationLink_link__b_WaA"}},3257:e=>{e.exports={group:"createTask_group__XSvRW"}},3429:e=>{e.exports={header:"Header_header__mjk9B",scrolled:"Header_scrolled__UEvVD",content__right:"Header_content__right__Xotbx",list:"Header_list__Oc7Pz",burger:"Header_burger__do6Rn",theme_switcher:"Header_theme_switcher__kCJqk",dark:"Header_dark__lAzRt",light:"Header_light__Whbrs"}},3494:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var a=n(5155),r=n(2115),s=n(5054),o=n.n(s);let i=e=>{let{type:t="text",label:n,value:s,onChange:i,radius:l="32px",error_text:c,required:d=!1}=e,[u,p]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:o().input__container,children:[(0,a.jsx)("input",{required:d,type:"password"===t&&u?"text":t,className:o().input+"".concat(c?" "+o().error:""),value:s,onChange:i,style:{borderRadius:l}}),(0,a.jsx)("label",{className:o().label,children:n}),c&&(0,a.jsx)("label",{className:o().error__label,children:c}),"password"===t&&(0,a.jsx)("button",{type:"button",className:o().password__toggle,onClick:()=>{p(!u)},"aria-label":u?"Скрыть пароль":"Показать пароль",children:(0,a.jsx)("i",{className:"pi ".concat(u?"pi-eye":"pi-eye-slash")})})]})}},4403:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var a=n(5453),r=n(6786);class s{static async getSubjects(e){return(await fetch("".concat("https://info-run.ru","/api/subjects"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async getTaskNumber(e,t){return(await fetch("".concat("https://info-run.ru","/api/tasks?subject_id=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}}class o{static async create(e,t){return(await fetch("".concat("https://info-run.ru","/api/subtasks/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t})).json()}}let i=(0,a.v)()((0,r.Zr)((e,t)=>({loading:!1,error:null,success:null,subject:null,subjects:[],task:null,tasks:[],elements:[],getSubjects:async()=>{e({loading:!0});let t=localStorage.getItem("token")||"";try{let n=await s.getSubjects(t);e({subjects:n.subjects,loading:!1})}catch(t){e({error:"Ошибка получения данных"+t,loading:!1})}},setSubject:t=>{e({subject:t})},getTaskNumber:async t=>{e({loading:!0});let n=localStorage.getItem("token")||"";try{let a=await s.getTaskNumber(n,t);e({tasks:a.tasks,loading:!1})}catch(t){e({error:"Ошибка получения данных"+t,loading:!1})}},setTask:t=>{e({task:t})},moveElement:(t,n)=>{e(e=>({elements:e.elements.map(a=>{if(a.id===t){let t=e.elements.indexOf(a);if("up"===n&&t>0)return e.elements[t-1];if("down"===n&&t<e.elements.length-1)return e.elements[t+1]}return a})}))},addElement:t=>{let n={id:Date.now().toString(),type:t,content:"text"===t?"":void 0,file:"image"===t?null:void 0};e(e=>({elements:[...e.elements,n]}))},updateElement:(t,n)=>{e(e=>({elements:e.elements.map(e=>e.id===t?{...e,...n}:e)}))},removeElement:t=>{e(e=>({elements:e.elements.filter(e=>e.id!==t)}))},handleSave:async()=>{e({loading:!0,success:null,error:null});let n=localStorage.getItem("token")||"",a=JSON.parse(localStorage.getItem("constructor-storage")||"").state.task.TaskID;try{var r;let s=new FormData;(null==(r=t().task)?void 0:r.TaskID)&&s.append("task_id",a);let i=[];t().elements.forEach((e,t)=>{"text"===e.type?i.push({type:"text",content:e.content||""}):"image"===e.type&&e.file&&(s.append("file_".concat(t),e.file),i.push({type:"image",file_index:t,content:e.content||""}))}),s.append("blocks",JSON.stringify(i));let l=await o.create(n,s);e({success:l.message,loading:!1})}catch(t){e({error:"Ошибка в создании задачи: "+t,loading:!1})}},clearMessages:()=>{e({error:null,success:null})}}),{name:"constructor-storage",storage:(0,r.KU)(()=>localStorage),partialize:e=>({subject:e.subject,task:e.task})}))},4703:()=>{},4823:(e,t,n)=>{"use strict";n.d(t,{CreateForm:()=>w});var a=n(5155),r=n(2115),s=n(8274),o=n(760);n(4703);var i=n(6330),l=n(6874),c=n.n(l);function d(e){let{children:t,initialStep:n=1,onStepChange:s=()=>{},onFinalStepCompleted:o=()=>{},stepCircleContainerClassName:l="",stepContainerClassName:d="",contentClassName:p="",footerClassName:h="",backButtonText:_="Назад",nextButtonText:x="Далее",disabledNextButton:v=!1,disableStepIndicators:j=!1,renderStepIndicator:f,endButtonChildren:b,linkEndButton:k,...y}=e,[w,N]=(0,r.useState)(n),[S,C]=(0,r.useState)(0),T=r.Children.toArray(t),z=T.length,E=w>z,P=w===z,I="function"==typeof v?v(w):v,F=e=>{N(e),e>z?o():s(e)};return(0,a.jsx)("div",{className:"outer-container",...y,children:(0,a.jsxs)("div",{className:"step-circle-container ".concat(l),style:{border:"1px solid var(--primary)",backgroundColor:"var(--bg)"},children:[(0,a.jsx)("div",{className:"step-indicator-row ".concat(d),children:T.map((e,t)=>{let n=t+1;return(0,a.jsxs)(r.Fragment,{children:[f?f({step:n,currentStep:w,onStepClick:e=>{C(e>w?1:-1),F(e)}}):(0,a.jsx)(m,{step:n,disableStepIndicators:j,currentStep:w,onClickStep:e=>{C(e>w?1:-1),F(e)}}),t<z-1&&(0,a.jsx)(g,{isComplete:w>n})]},n)})}),(0,a.jsx)(u,{isCompleted:E,currentStep:w,direction:S,className:"step-content-default ".concat(p),children:T[w-1]}),!E&&(0,a.jsx)("div",{className:"footer-container ".concat(h),children:(0,a.jsxs)("div",{className:"footer-nav ".concat(1!==w?"spread":"end"),children:[1!==w&&(0,a.jsx)(i.$,{size:"small",fontSize:"small",outlined:!0,color:"text",onClick:()=>{w>1&&(C(-1),F(w-1))},children:_}),P?(0,a.jsx)(c(),{href:k||"",children:(0,a.jsx)(i.$,{size:"small",fontSize:"small",filled:!0,color:"white",onClick:()=>{C(1),F(z+1)},children:b})}):(0,a.jsx)(i.$,{disabled:I,size:"small",fontSize:"small",filled:!0,color:"white",onClick:()=>{!P&&v&&(C(1),F(w+1))},children:x})]})})]})})}function u(e){let{isCompleted:t,currentStep:n,direction:i,children:l,className:c}=e,[d,u]=(0,r.useState)(0);return(0,a.jsx)(s.P.div,{className:c,style:{position:"relative",overflow:"hidden"},animate:{height:t?0:d},transition:{type:"spring",duration:.4},children:(0,a.jsx)(o.N,{initial:!1,mode:"sync",custom:i,children:!t&&(0,a.jsx)(p,{direction:i,onHeightReady:e=>u(e),children:l},n)})})}function p(e){let{children:t,direction:n,onHeightReady:o}=e,i=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{i.current&&o(i.current.offsetHeight)},[t,o]),(0,a.jsx)(s.P.div,{ref:i,custom:n,variants:h,initial:"enter",animate:"center",exit:"exit",transition:{duration:.4},style:{position:"absolute",left:0,right:0,top:0},children:t})}let h={enter:e=>({x:e>=0?"-100%":"100%",opacity:0}),center:{x:"0%",opacity:1},exit:e=>({x:e>=0?"50%":"-50%",opacity:0})};function _(e){let{children:t}=e;return(0,a.jsx)("div",{className:"step-default",children:t})}function m(e){let{step:t,currentStep:n,onClickStep:r,disableStepIndicators:o,disabledNextButton:i}=e,l=n===t?"active":n<t?"inactive":"complete";return(0,a.jsx)(s.P.div,{onClick:()=>{t===n||o||i||r(t)},className:"step-indicator",animate:l,initial:!1,children:(0,a.jsx)(s.P.div,{variants:{inactive:{scale:1,backgroundColor:"var(--primary)",color:"var(--bg)"},active:{scale:1,backgroundColor:"var(--primary)",color:"var(--bg)"},complete:{scale:1,backgroundColor:"var(--primary)",color:"var(--bg)"}},transition:{duration:.3},className:"step-indicator-inner",children:"complete"===l?(0,a.jsx)(x,{className:"check-icon"}):"active"===l?(0,a.jsx)("div",{className:"active-dot"}):(0,a.jsx)("span",{className:"step-number",children:t})})})}function g(e){let{isComplete:t}=e;return(0,a.jsx)("div",{className:"step-connector",children:(0,a.jsx)(s.P.div,{className:"step-connector-inner",variants:{incomplete:{width:0,backgroundColor:"transparent"},complete:{width:"100%",backgroundColor:"var(--light-gray)"}},initial:!1,animate:t?"complete":"incomplete",transition:{duration:.4}})})}function x(e){return(0,a.jsx)("svg",{...e,fill:"none",stroke:"white",strokeWidth:2,viewBox:"0 0 24 24",children:(0,a.jsx)(s.P.path,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.1,type:"tween",ease:"easeOut",duration:.3},strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}var v=n(4403),j=n(7814),f=n(1152),b=n(9986),k=n.n(b),y=n(3494);let w=()=>{let[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),{subjects:h,getSubjects:m,setSubject:g,getTaskNumber:x,subject:b,loading:w,error:N,tasks:S,task:C,setTask:T}=(0,v.L)();return(0,r.useEffect)(()=>{m()},[]),(0,r.useEffect)(()=>{t(!!b),b&&x(b.ID)},[b]),(0,r.useEffect)(()=>{s(!!C)},[C]),(0,a.jsx)("div",{children:(0,a.jsxs)(d,{linkEndButton:"/profile/create-task/constructor",endButtonChildren:"Перейти в конструктор",disabledNextButton:t=>(t=>{switch(t){case 1:return!e;case 2:return!n;default:return!1}})(t),children:[(0,a.jsx)(_,{children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w&&(!h||0===h.length)?(0,a.jsx)(j.y,{}):(0,a.jsxs)("div",{className:k().select__container,children:[(0,a.jsx)("i",{className:"pi pi-chevron-down ".concat(k().icon)}),(0,a.jsxs)("select",{className:k().select,value:(null==b?void 0:b.Name)||"",onChange:e=>{let t=null==h?void 0:h.find(t=>t.Name===e.target.value);t&&g(t)},children:[(0,a.jsx)("option",{value:"",children:"Выберите предмет"}),null==h?void 0:h.map(e=>(0,a.jsx)("option",{value:e.Name,children:e.Name},e.ID))]})]}),N&&(0,a.jsx)("p",{style:{color:"red"},children:N})]})}),(0,a.jsx)(_,{children:(0,a.jsx)("div",{className:k().select__container,children:w&&(!S||0===S.length)?(0,a.jsx)(j.y,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"pi pi-chevron-down ".concat(k().icon)}),(0,a.jsxs)("select",{className:k().select,value:(null==C?void 0:C.TaskTitle)||"",onChange:e=>{let t=null==S?void 0:S.find(t=>t.TaskTitle===e.target.value);t&&T(t)},children:[(0,a.jsx)("option",{value:"",children:"Выберите номер задания"}),null==S?void 0:S.map(e=>(0,a.jsx)("option",{value:e.TaskTitle,children:e.TaskTitle},e.TaskID))]})]})})}),(0,a.jsx)(_,{children:(0,a.jsx)(f.f,{onChange:i,value:o,placeholder:"Введите описание задания"})}),(0,a.jsx)(_,{children:(0,a.jsx)(f.f,{onChange:c,value:l,placeholder:"Введите ответ"})}),(0,a.jsx)(_,{children:(0,a.jsx)(y.p,{radius:"16px",label:"Ссылка на решение",value:u,onChange:e=>p(e.target.value)})})]})})}},5003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});let a={src:"/_next/static/media/group.27ede8d3.svg",height:2234,width:1440,blurWidth:0,blurHeight:0}},5054:e=>{e.exports={input__container:"Input_input__container__995Fx",label:"Input_label__dSg8c",error:"Input_error__fm0DP",input:"Input_input__MqBoX",error__label:"Input_error__label__P37Ti",password__toggle:"Input_password__toggle__FdkGg"}},6006:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,3063,23)),Promise.resolve().then(n.bind(n,5003)),Promise.resolve().then(n.t.bind(n,3257,23)),Promise.resolve().then(n.bind(n,4823)),Promise.resolve().then(n.t.bind(n,7465,23)),Promise.resolve().then(n.t.bind(n,2078,23)),Promise.resolve().then(n.bind(n,7364))},6330:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var a=n(5155),r=n(6862),s=n.n(r);let o=e=>{let{children:t,disabled:n=!1,onClick:r,radius:o="32px",filled:i=!1,border:l,outlined:c=!1,color:d="text",style:u,type:p,width:h="auto",loading:_=!1,size:m="base",fontSize:g="base"}=e;return _&&(n=!0),(0,a.jsx)("button",{type:p,style:u||{zIndex:10,width:"full"===h?"100%":"auto",fontSize:"var(--".concat(g,")"),borderRadius:o,padding:"base"===m?"10px 25px":"5px 10px",backgroundColor:i?"var(--primary)":"transparent",color:d?"var(--".concat(d,")"):i?"var(--bg)":"var(--text)",border:l?"1px solid var(--".concat(l,")"):c?"1px solid var(--primary)":"none"},className:"".concat(s().button," ").concat(n?s().disabled:s().active," ").concat(c?s().outlined:""),disabled:n,onClick:r,children:_?(0,a.jsx)("span",{style:{fontSize:"1.2rem"},className:"".concat(s().spinner," ")}):t})}},6862:e=>{e.exports={button:"Button_button__MKRSq",disabled:"Button_disabled__zBBD3",active:"Button_active__ecv28",spinner:"Button_spinner__C4NUU",pulseSpin:"Button_pulseSpin__3QKkJ"}},7364:(e,t,n)=>{"use strict";n.d(t,{Header:()=>_});var a=n(5155);let r={src:"/_next/static/media/burger-menu.f63868ce.svg",height:40,width:40,blurWidth:0,blurHeight:0};var s=n(6330),o=n(3429),i=n.n(o),l=n(8056),c=n(6874),d=n.n(c),u=n(6766),p=n(7374),h=n(2115);let _=()=>{let e=(0,l.k)(e=>e.logout),t=(0,l.k)(e=>e.user),[n,o]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let e=()=>{window.scrollY>100?o(!0):o(!1)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,a.jsx)("header",{children:(0,a.jsx)("div",{className:"".concat(i().header," ").concat(n?i().scrolled:""),children:(0,a.jsxs)("div",{className:i().content__right,children:[(0,a.jsx)(u.default,{src:r,alt:"",className:i().burger}),(null==t?void 0:t.RoleName)==="Админ"&&(0,a.jsx)(d(),{href:"/admin",children:(0,a.jsx)(s.$,{color:"white",filled:!0,children:"admin"})}),(0,a.jsxs)("ul",{className:i().list,children:[(0,a.jsx)(p.H,{href:"/profile",size:"base",children:"Профиль"}),(0,a.jsx)(p.H,{href:"/profile/all-tasks",size:"base",children:"Мои задачи"}),(0,a.jsx)(p.H,{href:"/",size:"base",children:"Категории заданий"})]}),t?(0,a.jsx)(s.$,{outlined:!0,onClick:e,children:"Выйти"}):(0,a.jsx)(d(),{href:"/auth",children:(0,a.jsx)(s.$,{color:"white",filled:!0,children:"Войти"})})]})})})}},7374:(e,t,n)=>{"use strict";n.d(t,{H:()=>l});var a=n(5155),r=n(2078),s=n.n(r),o=n(6874),i=n.n(o);let l=e=>{let{children:t,href:n,size:r="base",...o}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("li",{...o,className:s().link,style:{fontSize:"var(--".concat(r,")")},children:(0,a.jsx)(i(),{href:n||"/",children:t})})})}},7465:e=>{e.exports={footer:"Footer_footer__0UEuE",bottom:"Footer_bottom__Cb1G_",line:"Footer_line__uYmv3",vertical__line:"Footer_vertical__line__lDeQ6","footer-sticky":"Footer_footer-sticky__E_fhZ",container:"Footer_container__MzX7a",mobile:"Footer_mobile__D4940",content:"Footer_content__vgu2q"}},7814:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var a=n(5155),r=n(422),s=n.n(r);let o=()=>(0,a.jsx)("div",{className:s().spinner,children:(0,a.jsx)("span",{className:s().loader})})},8056:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var a=n(5453),r=n(6786),s=n(525);let o=(0,a.v)((0,r.Zr)((0,r.kg)({user:null,token:null,error:null,loading:!1},e=>({login:async(t,n)=>{e({loading:!0});try{let a=await s.A.loginV2(t,n);if(a.detail){e({error:{error:a.detail.error||"Validation Error",message:a.detail.message||"Invalid credentials"},loading:!1}),console.log(a.detail);return}e({user:a.student,token:a.access_token,error:null,loading:!1}),localStorage.setItem("token",a.access_token),console.log(localStorage.getItem("token"))}catch(n){let t="Authorization error";n instanceof Error&&(t=n.message),e({error:{error:"Authorization error",message:t},loading:!1}),console.log(n)}},logout:async()=>{try{let t=localStorage.getItem("token");await s.A.logout(t||""),e({user:null,token:null}),localStorage.removeItem("token")}catch(e){console.log(e)}},clearError:()=>e({error:null})})),{name:"user-storage"}))},9624:e=>{e.exports={textarea:"TextArea_textarea__sC88j"}},9986:e=>{e.exports={select:"CreateForm_select__Vq6Nf",option:"CreateForm_option__84tl6",select__container:"CreateForm_select__container__Z_CHy",icon:"CreateForm_icon__DfC0l"}}},e=>{e.O(0,[8907,6545,7009,7446,3068,4677,8441,5964,7358],()=>e(e.s=6006)),_N_E=e.O()}]);