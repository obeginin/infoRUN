(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4174],{446:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,3063,23)),Promise.resolve().then(r.bind(r,4023)),Promise.resolve().then(r.bind(r,5003)),Promise.resolve().then(r.bind(r,4589)),Promise.resolve().then(r.bind(r,5828)),Promise.resolve().then(r.t.bind(r,7465,23)),Promise.resolve().then(r.t.bind(r,2078,23)),Promise.resolve().then(r.t.bind(r,4468,23)),Promise.resolve().then(r.bind(r,7364)),Promise.resolve().then(r.bind(r,2529))},525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});class a{static async login(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Login:e,Password:t})})).json()}static async loginV2(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login/v2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})})).json()}static async logout(e){return(await fetch("".concat("https://info-run.ru","/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async resetPassword(e){return(await fetch("".concat("https://info-run.ru","/api/auth/password_reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e})})).json()}static async resetPasswordWithToken(e,t,r){let a=await fetch("".concat("https://info-run.ru","/api/auth/password_reset_with_token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,new_password:t,repeat_new_password:r})});return a.status,a.json()}}},2078:e=>{e.exports={link:"AnimationLink_link__b_WaA"}},2371:e=>{e.exports={container:"RegistrationForm_container__uVp3o",form:"RegistrationForm_form__fQ8uj",error:"RegistrationForm_error__10YEE"}},2529:(e,t,r)=>{"use strict";r.d(t,{RegistrationForm:()=>h});var a=r(5155),n=r(5695),o=r(8045),i=r(6330),s=r(3494),l=r(3208),c=r(2371),d=r.n(c),u=r(2115),_=r(4958);let h=()=>{let[e,t]=(0,u.useState)(""),[r,c]=(0,u.useState)(""),[h,p]=(0,u.useState)(""),[g,m]=(0,u.useState)(""),[b,v]=(0,u.useState)(!1),[f,x]=(0,u.useState)(!1),[j,y]=(0,u.useState)(!1),w=(0,n.useRouter)();return(0,u.useEffect)(()=>{v(!1),x(!1),y(!1)},[e,r,h]),(0,a.jsx)("div",{className:"app",children:(0,a.jsx)("div",{className:d().container,children:(0,a.jsx)(o.K,{children:(0,a.jsxs)("div",{className:d().form,children:[(0,a.jsx)(l.f,{children:"Регистрация"}),(0,a.jsx)(s.p,{error_text:b?"Логин должен состоять минимум из 4 символов":"",required:!0,radius:"16px",type:"text",label:"Логин",value:e,onChange:e=>t(e.target.value)}),(0,a.jsx)(s.p,{error_text:f?"Email должен состоять минимум из 4 символов":"",required:!0,radius:"16px",type:"text",label:"Email",value:r,onChange:e=>c(e.target.value)}),(0,a.jsx)(s.p,{error_text:j?"Пароль должен состоять минимум из 4 символов":"",required:!0,radius:"16px",type:"password",label:"Пароль",value:h,onChange:e=>p(e.target.value)}),(0,a.jsx)(s.p,{radius:"16px",required:!0,type:"number",label:"Телефон",value:g,onChange:e=>m(e.target.value)}),(0,a.jsx)(i.$,{type:"submit",onClick:()=>e.length<=3?void v(!0):r.length<=3||!r.includes("@")?void x(!0):h.length<=3?void y(!0):void(_.A.registration(r,e,h,g),sessionStorage.setItem("registrationData",JSON.stringify({email:r,login:e,password:h,tel:g})),w.push("/registration/confirm-email")),filled:!0,width:"full",color:"white",children:"Далее"}),(0,a.jsx)(i.$,{outlined:!0,width:"full",onClick:()=>w.push("/auth"),children:"Уже есть аккаунт"})]})})})})}},3208:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var a=r(5155);let n=e=>{let{children:t,size:r="base",f_weight:n="light",color:o}=e;return(0,a.jsx)("p",{style:{fontSize:"var(--".concat(r,")"),fontWeight:"var(--fw_".concat(n,")"),color:"var(--".concat(o,")")},children:t})}},3429:e=>{e.exports={header:"Header_header__mjk9B",scrolled:"Header_scrolled__UEvVD",content__right:"Header_content__right__Xotbx",list:"Header_list__Oc7Pz",burger:"Header_burger__do6Rn",theme_switcher:"Header_theme_switcher__kCJqk",dark:"Header_dark__lAzRt",light:"Header_light__Whbrs"}},3494:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(5155),n=r(2115),o=r(5054),i=r.n(o);let s=e=>{let{type:t="text",label:r,value:o,onChange:s,radius:l="32px",error_text:c,required:d=!1}=e,[u,_]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:i().input__container,children:[(0,a.jsx)("input",{required:d,type:"password"===t&&u?"text":t,className:i().input+"".concat(c?" "+i().error:""),value:o,onChange:s,style:{borderRadius:l}}),(0,a.jsx)("label",{className:i().label,children:r}),c&&(0,a.jsx)("label",{className:i().error__label,children:c}),"password"===t&&(0,a.jsx)("button",{type:"button",className:i().password__toggle,onClick:()=>{_(!u)},"aria-label":u?"Скрыть пароль":"Показать пароль",children:(0,a.jsx)("i",{className:"pi ".concat(u?"pi-eye":"pi-eye-slash")})})]})}},4001:e=>{e.exports={outside__content:"ProfileContentContainer_outside__content__7rkiJ",content:"ProfileContentContainer_content__90rmg"}},4023:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a={src:"/_next/static/media/group_black.0bd10143.svg",height:530,width:472,blurWidth:0,blurHeight:0}},4468:e=>{e.exports={container:"registration_container__l_Wmf",group:"registration_group__LIN5L",right:"registration_right__KKhk0",group__black:"registration_group__black__riT91",male:"registration_male__YySa1",wave:"registration_wave__z5tOg",form:"registration_form__h2G42"}},4589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a={src:"/_next/static/media/wave.ad4d9447.svg",height:244,width:1440,blurWidth:0,blurHeight:0}},4958:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});class a{static async registration(e,t,r,a){return(await fetch("".concat("https://info-run.ru","/api/auth/register/v2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,login:t,password:r,phone:a})})).json()}static async confirmEmail(){return(await fetch("".concat("https://info-run.ru","/api/auth/confirm-email"),{method:"GET",headers:{"Content-Type":"application/json"}})).json()}static async confirmToken(e){return(await fetch("".concat("https://info-run.ru","/api/auth/confirm-email"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}}},5003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a={src:"/_next/static/media/group.27ede8d3.svg",height:2234,width:1440,blurWidth:0,blurHeight:0}},5054:e=>{e.exports={input__container:"Input_input__container__995Fx",label:"Input_label__dSg8c",error:"Input_error__fm0DP",input:"Input_input__MqBoX",error__label:"Input_error__label__P37Ti",password__toggle:"Input_password__toggle__FdkGg"}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5828:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a={src:"/_next/static/media/male1.65b5cb34.svg",height:736,width:873,blurWidth:0,blurHeight:0}},6330:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var a=r(5155),n=r(6862),o=r.n(n);let i=e=>{let{children:t,disabled:r=!1,onClick:n,radius:i="32px",filled:s=!1,border:l,outlined:c=!1,color:d="text",style:u,type:_,width:h="auto",loading:p=!1,size:g="base",fontSize:m="base"}=e;return p&&(r=!0),(0,a.jsx)("button",{type:_,style:u||{zIndex:10,width:"full"===h?"100%":"auto",fontSize:"var(--".concat(m,")"),borderRadius:i,padding:"base"===g?"10px 25px":"5px 10px",backgroundColor:s?"var(--primary)":"transparent",color:d?"var(--".concat(d,")"):s?"var(--bg)":"var(--text)",border:l?"1px solid var(--".concat(l,")"):c?"1px solid var(--primary)":"none"},className:"".concat(o().button," ").concat(r?o().disabled:o().active," ").concat(c?o().outlined:""),disabled:r,onClick:n,children:p?(0,a.jsx)("span",{style:{fontSize:"1.2rem"},className:"".concat(o().spinner," ")}):t})}},6862:e=>{e.exports={button:"Button_button__MKRSq",disabled:"Button_disabled__zBBD3",active:"Button_active__ecv28",spinner:"Button_spinner__C4NUU",pulseSpin:"Button_pulseSpin__3QKkJ"}},7364:(e,t,r)=>{"use strict";r.d(t,{Header:()=>p});var a=r(5155);let n={src:"/_next/static/media/burger-menu.f63868ce.svg",height:40,width:40,blurWidth:0,blurHeight:0};var o=r(6330),i=r(3429),s=r.n(i),l=r(8056),c=r(6874),d=r.n(c),u=r(6766),_=r(7374),h=r(2115);let p=()=>{let e=(0,l.k)(e=>e.logout),t=(0,l.k)(e=>e.user),[r,i]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let e=()=>{window.scrollY>100?i(!0):i(!1)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,a.jsx)("header",{children:(0,a.jsx)("div",{className:"".concat(s().header," ").concat(r?s().scrolled:""),children:(0,a.jsxs)("div",{className:s().content__right,children:[(0,a.jsx)(u.default,{src:n,alt:"",className:s().burger}),(null==t?void 0:t.RoleName)==="Админ"&&(0,a.jsx)(d(),{href:"/admin",children:(0,a.jsx)(o.$,{color:"white",filled:!0,children:"admin"})}),(0,a.jsxs)("ul",{className:s().list,children:[(0,a.jsx)(_.H,{href:"/profile",size:"base",children:"Профиль"}),(0,a.jsx)(_.H,{href:"/profile/all-tasks",size:"base",children:"Мои задачи"}),(0,a.jsx)(_.H,{href:"/",size:"base",children:"Категории заданий"})]}),t?(0,a.jsx)(o.$,{outlined:!0,onClick:e,children:"Выйти"}):(0,a.jsx)(d(),{href:"/auth",children:(0,a.jsx)(o.$,{color:"white",filled:!0,children:"Войти"})})]})})})}},7374:(e,t,r)=>{"use strict";r.d(t,{H:()=>l});var a=r(5155),n=r(2078),o=r.n(n),i=r(6874),s=r.n(i);let l=e=>{let{children:t,href:r,size:n="base",...i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("li",{...i,className:o().link,style:{fontSize:"var(--".concat(n,")")},children:(0,a.jsx)(s(),{href:r||"/",children:t})})})}},7465:e=>{e.exports={footer:"Footer_footer__0UEuE",bottom:"Footer_bottom__Cb1G_",line:"Footer_line__uYmv3",vertical__line:"Footer_vertical__line__lDeQ6","footer-sticky":"Footer_footer-sticky__E_fhZ",container:"Footer_container__MzX7a",mobile:"Footer_mobile__D4940",content:"Footer_content__vgu2q"}},8045:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var a=r(5155),n=r(4001),o=r.n(n);let i=e=>{let{children:t,width:r,color:n,borderColor:i}=e;return(0,a.jsx)("div",{className:o().outside__content,style:{maxWidth:r},children:(0,a.jsx)("div",{className:o().content,style:{backgroundColor:n?"var(--".concat(n,")"):"",border:i?"1px solid var(--".concat(n,")"):"1px solid var(--primary)",transition:"all 0.2s ease-in-out"},children:t})})}},8056:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var a=r(5453),n=r(6786),o=r(525);let i=(0,a.v)((0,n.Zr)((0,n.kg)({user:null,token:null,error:null,loading:!1},e=>({login:async(t,r)=>{e({loading:!0});try{let a=await o.A.loginV2(t,r);if(a.detail){e({error:{error:a.detail.error||"Validation Error",message:a.detail.message||"Invalid credentials"},loading:!1}),console.log(a.detail);return}e({user:a.student,token:a.access_token,error:null,loading:!1}),localStorage.setItem("token",a.access_token),console.log(localStorage.getItem("token"))}catch(r){let t="Authorization error";r instanceof Error&&(t=r.message),e({error:{error:"Authorization error",message:t},loading:!1}),console.log(r)}},logout:async()=>{try{let t=localStorage.getItem("token");await o.A.logout(t||""),e({user:null,token:null}),localStorage.removeItem("token")}catch(e){console.log(e)}},clearError:()=>e({error:null})})),{name:"user-storage"}))}},e=>{e.O(0,[7,7446,3307,3068,8441,5964,7358],()=>e(e.s=446)),_N_E=e.O()}]);