(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{525:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});class o{static async login(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Login:e,Password:t})})).json()}static async loginV2(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login/v2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})})).json()}static async logout(e){return(await fetch("".concat("https://info-run.ru","/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async resetPassword(e){return(await fetch("".concat("https://info-run.ru","/api/auth/password_reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e})})).json()}static async resetPasswordWithToken(e,t,r){let o=await fetch("".concat("https://info-run.ru","/api/auth/password_reset_with_token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,new_password:t,repeat_new_password:r})});return o.status,o.json()}}},683:(e,t,r)=>{"use strict";r.d(t,{AuthForm:()=>p});var o=r(5155),a=r(8056),s=r(6330),n=r(3494),i=r(3208),l=r(4205),c=r.n(l),d=r(2115),u=r(8045),_=r(7374),h=r(5695);let p=()=>{let[e,t]=(0,d.useState)(""),[r,l]=(0,d.useState)(""),p=(0,a.k)(e=>e.login),g=(0,a.k)(e=>e.user),m=(0,a.k)(e=>e.loading),b=(0,a.k)(e=>e.error),[f,x]=(0,d.useState)(!1),[v,k]=(0,d.useState)(!1),j=(0,a.k)(e=>e.clearError),w=(0,h.useRouter)();return(0,d.useEffect)(()=>{g&&w.push("/profile")},[g,w,p]),(0,d.useEffect)(()=>{x(!1),k(!1),j()},[e,r,j]),(0,d.useEffect)(()=>{b&&("LoginNotFound"===b.error&&x(!0),"PasswordFailed"===b.error&&k(!0))},[b]),(0,o.jsx)("div",{className:c()["auth-form-outer"],children:(0,o.jsx)("div",{className:c().container,children:(0,o.jsx)(u.K,{children:(0,o.jsxs)("div",{className:c().form,children:[(0,o.jsx)(i.f,{children:"Авторизация"}),(0,o.jsx)(n.p,{type:"text",label:"Логин",value:e,onChange:e=>t(e.target.value),radius:"16px",error_text:f?"Логин не найден":""}),(0,o.jsx)(n.p,{type:"password",label:"Пароль",value:r,onChange:e=>l(e.target.value),radius:"16px",error_text:v?null==b?void 0:b.message:""}),(0,o.jsx)(s.$,{onClick:()=>void(p(e,r),(null==b?void 0:b.error)==="LoginNotFoud"&&t(""),(null==b?void 0:b.error)==="PasswordFailed"&&l("")),filled:!0,color:"white",width:"full",radius:"16px",loading:m,children:"Вход"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)(_.H,{href:"/forgot-password",size:"small",children:"Забыли пароль?"}),(0,o.jsx)(_.H,{href:"/registration",size:"small",children:"Регистрация"})]})]})})})})}},2078:e=>{e.exports={link:"AnimationLink_link__b_WaA"}},3208:(e,t,r)=>{"use strict";r.d(t,{f:()=>a});var o=r(5155);let a=e=>{let{children:t,size:r="base",f_weight:a="light",color:s}=e;return(0,o.jsx)("p",{style:{fontSize:"var(--".concat(r,")"),fontWeight:"var(--fw_".concat(a,")"),color:"var(--".concat(s,")")},children:t})}},3429:e=>{e.exports={header:"Header_header__mjk9B",content__right:"Header_content__right__Xotbx",list:"Header_list__Oc7Pz",burger:"Header_burger__do6Rn",theme_switcher:"Header_theme_switcher__kCJqk",dark:"Header_dark__lAzRt",light:"Header_light__Whbrs"}},3494:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var o=r(5155),a=r(2115),s=r(5054),n=r.n(s);let i=e=>{let{type:t="text",label:r,value:s,onChange:i,radius:l="32px",error_text:c,required:d=!1}=e,[u,_]=(0,a.useState)(!1);return(0,o.jsxs)("div",{className:n().input__container,children:[(0,o.jsx)("input",{required:d,type:"password"===t&&u?"text":t,className:n().input+"".concat(c?" "+n().error:""),value:s,onChange:i,style:{borderRadius:l}}),(0,o.jsx)("label",{className:n().label,children:r}),c&&(0,o.jsx)("label",{className:n().error__label,children:c}),"password"===t&&(0,o.jsx)("button",{type:"button",className:n().password__toggle,onClick:()=>{_(!u)},"aria-label":u?"Скрыть пароль":"Показать пароль",children:(0,o.jsx)("i",{className:"pi ".concat(u?"pi-eye":"pi-eye-slash")})})]})}},4001:e=>{e.exports={outside__content:"ProfileContentContainer_outside__content__7rkiJ",content:"ProfileContentContainer_content__90rmg"}},4023:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o={src:"/_next/static/media/group_black.0bd10143.svg",height:530,width:472,blurWidth:0,blurHeight:0}},4205:e=>{e.exports={container:"AuthForm_container__IRKao","auth-form-outer":"AuthForm_auth-form-outer__uZeYQ",form:"AuthForm_form__Tjm_U"}},4589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o={src:"/_next/static/media/wave.ad4d9447.svg",height:244,width:1440,blurWidth:0,blurHeight:0}},4717:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,3063,23)),Promise.resolve().then(r.bind(r,4023)),Promise.resolve().then(r.bind(r,5003)),Promise.resolve().then(r.bind(r,4589)),Promise.resolve().then(r.bind(r,5828)),Promise.resolve().then(r.t.bind(r,9478,23)),Promise.resolve().then(r.bind(r,683)),Promise.resolve().then(r.t.bind(r,7465,23)),Promise.resolve().then(r.t.bind(r,2078,23)),Promise.resolve().then(r.bind(r,7364))},5003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o={src:"/_next/static/media/group.27ede8d3.svg",height:2234,width:1440,blurWidth:0,blurHeight:0}},5054:e=>{e.exports={input__container:"Input_input__container__995Fx",label:"Input_label__dSg8c",error:"Input_error__fm0DP",input:"Input_input__MqBoX",error__label:"Input_error__label__P37Ti",password__toggle:"Input_password__toggle__FdkGg"}},5695:(e,t,r)=>{"use strict";var o=r(8999);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},5828:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o={src:"/_next/static/media/male1.65b5cb34.svg",height:736,width:873,blurWidth:0,blurHeight:0}},6330:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var o=r(5155),a=r(6862),s=r.n(a);let n=e=>{let{children:t,disabled:r=!1,onClick:a,radius:n="32px",filled:i=!1,border:l,outlined:c=!1,color:d="text",style:u,type:_,width:h="auto",loading:p=!1,size:g="base"}=e;return p&&(r=!0),(0,o.jsx)("button",{type:_,style:u||{zIndex:10,width:"full"===h?"100%":"auto",borderRadius:n,padding:"base"===g?"10px 25px":"5px 10px",backgroundColor:i?"var(--primary)":"transparent",color:d?"var(--".concat(d,")"):i?"var(--bg)":"var(--text)",border:l?"1px solid var(--".concat(l,")"):c?"1px solid var(--primary)":"none"},className:"".concat(s().button," ").concat(r?s().disabled:s().active," ").concat(c?s().outlined:""),disabled:r,onClick:a,children:p?(0,o.jsx)("span",{style:{fontSize:"1.2rem"},className:"".concat(s().spinner," ")}):t})}},6862:e=>{e.exports={button:"Button_button__MKRSq",disabled:"Button_disabled__zBBD3",active:"Button_active__ecv28",spinner:"Button_spinner__C4NUU",pulseSpin:"Button_pulseSpin__3QKkJ"}},7364:(e,t,r)=>{"use strict";r.d(t,{Header:()=>h});var o=r(5155);let a={src:"/_next/static/media/burger-menu.f63868ce.svg",height:40,width:40,blurWidth:0,blurHeight:0};var s=r(6330),n=r(3429),i=r.n(n),l=r(8056),c=r(6874),d=r.n(c),u=r(6766),_=r(7374);let h=()=>{let e=(0,l.k)(e=>e.logout),t=(0,l.k)(e=>e.user);return(0,o.jsx)("header",{className:i().header,children:(0,o.jsxs)("div",{className:i().content__right,children:[(0,o.jsx)(u.default,{src:a,alt:"",className:i().burger}),(null==t?void 0:t.RoleName)==="Админ"&&(0,o.jsx)(d(),{href:"/admin",children:(0,o.jsx)(s.$,{color:"white",filled:!0,children:"admin"})}),(0,o.jsxs)("ul",{className:i().list,children:[(0,o.jsx)(_.H,{href:"/profile",size:"base",children:"Профиль"}),(0,o.jsx)(_.H,{href:"/profile/all-tasks",size:"base",children:"Мои задачи"}),(0,o.jsx)(_.H,{href:"/",size:"base",children:"Категории заданий"})]}),t?(0,o.jsx)(s.$,{outlined:!0,onClick:e,children:"Выйти"}):(0,o.jsx)(d(),{href:"/auth",children:(0,o.jsx)(s.$,{color:"white",filled:!0,children:"Войти"})})]})})}},7374:(e,t,r)=>{"use strict";r.d(t,{H:()=>l});var o=r(5155),a=r(2078),s=r.n(a),n=r(6874),i=r.n(n);let l=e=>{let{children:t,href:r,size:a="base",...n}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("li",{...n,className:s().link,style:{fontSize:"var(--".concat(a,")")},children:(0,o.jsx)(i(),{href:r||"/",children:t})})})}},7465:e=>{e.exports={footer:"Footer_footer__0UEuE",bottom:"Footer_bottom__Cb1G_",line:"Footer_line__uYmv3",vertical__line:"Footer_vertical__line__lDeQ6","footer-sticky":"Footer_footer-sticky__E_fhZ",container:"Footer_container__MzX7a",mobile:"Footer_mobile__D4940",content:"Footer_content__vgu2q"}},8045:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var o=r(5155),a=r(4001),s=r.n(a);let n=e=>{let{children:t,width:r,color:a,borderColor:n}=e;return(0,o.jsx)("div",{className:s().outside__content,style:{maxWidth:r},children:(0,o.jsx)("div",{className:s().content,style:{backgroundColor:a?"var(--".concat(a,")"):"",border:n?"1px solid var(--".concat(a,")"):"1px solid var(--primary)",transition:"all 0.2s ease-in-out"},children:t})})}},8056:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var o=r(5453),a=r(6786),s=r(525);let n=(0,o.v)((0,a.Zr)((0,a.kg)({user:null,token:null,error:null,loading:!1},e=>({login:async(t,r)=>{e({loading:!0});try{let o=await s.A.loginV2(t,r);if(o.detail){e({error:{error:o.detail.error||"Validation Error",message:o.detail.message||"Invalid credentials"},loading:!1}),console.log(o.detail);return}e({user:o.student,token:o.access_token,error:null,loading:!1}),localStorage.setItem("token",o.access_token),console.log(localStorage.getItem("token"))}catch(r){let t="Authorization error";r instanceof Error&&(t=r.message),e({error:{error:"Authorization error",message:t},loading:!1}),console.log(r)}},logout:async()=>{try{let t=localStorage.getItem("token");await s.A.logout(t||""),e({user:null,token:null}),localStorage.removeItem("token")}catch(e){console.log(e)}},clearError:()=>e({error:null})})),{name:"user-storage"}))},9478:e=>{e.exports={container:"auth_container__Gyy4k",group:"auth_group__Lhcrt",right:"auth_right__IHq67",group__black:"auth_group__black__2Hpdv",male:"auth_male__MARgf",wave:"auth_wave__OgabB",form:"auth_form__KcDhW"}}},e=>{e.O(0,[531,977,57,687,441,964,358],()=>e(e.s=4717)),_N_E=e.O()}]);