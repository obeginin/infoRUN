(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{362:e=>{e.exports={link:"ALink_link__OwqEr"}},422:e=>{e.exports={spinner:"LoadingSpinner_spinner__zVFoh",loader:"LoadingSpinner_loader__ykQAA",rotate:"LoadingSpinner_rotate__azkfj",ball1:"LoadingSpinner_ball1__nu5rH",ball2:"LoadingSpinner_ball2__Z73WY"}},525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});class a{static async login(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Login:e,Password:t})})).json()}static async loginV2(e,t){return(await fetch("".concat("https://info-run.ru","/api/auth/login/v2"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})})).json()}static async logout(e){return(await fetch("".concat("https://info-run.ru","/api/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async resetPassword(e){return(await fetch("".concat("https://info-run.ru","/api/auth/password_reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e})})).json()}static async resetPasswordWithToken(e,t,s){let a=await fetch("".concat("https://info-run.ru","/api/auth/password_reset_with_token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,new_password:t,repeat_new_password:s})});return a.status,a.json()}}},673:(e,t,s)=>{"use strict";s.d(t,{AdminNewUser:()=>h});var a=s(5155),i=s(6330),n=s(8045),r=s(2115),l=s(7874),o=s(3494),d=s(9463),c=s.n(d),u=s(9418);let h=()=>{let[e,t]=(0,r.useState)(""),[s,d]=(0,r.useState)(""),[h,_]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)("М"),[j,f]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),N=localStorage.getItem("token"),[C,S]=(0,r.useState)([]),[k,D]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),[A,U]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),V=(0,u.g)(e=>e.addNewUser);return(0,r.useEffect)(()=>{l.A.adminRoles(N||"").then(e=>S(e)).catch(e=>console.log(e))},[N]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.K,{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px"},children:[(0,a.jsx)(i.$,{disabled:!0,filled:!0,color:"white",children:"Новый пользователь"}),(0,a.jsx)(i.$,{outlined:!0,onClick:()=>/[А-Яа-яЁё]/.test(e)?void D(!0):/[0-9]/.test(s)&&s.length<10?void U(!0):!h.includes("@")&&h.includes(".")?void E(!0):p.length<=6?void z(!0):void V(N||"",e,y,j,h,s,v,g||1,p),children:"Сохранить"})]}),(0,a.jsxs)("div",{className:c().form,children:[(0,a.jsx)(o.p,{radius:"16px",value:e,onChange:e=>t(e.target.value),type:"text",label:"Логин",error_text:k?"Логин должен состоять только из букв":""}),(0,a.jsx)(o.p,{radius:"16px",value:j,onChange:e=>f(e.target.value),type:"text",label:"Имя"}),(0,a.jsx)(o.p,{radius:"16px",value:y,onChange:e=>w(e.target.value),label:"Фамилия"}),(0,a.jsx)(o.p,{radius:"16px",value:s,type:"text",onChange:e=>d(e.target.value),label:"Телефон",error_text:A?"Введите корректный номер":""}),(0,a.jsx)(o.p,{radius:"16px",value:h,onChange:e=>_(e.target.value),type:"text",label:"Email",error_text:P?"Введите корректную почту":""}),(0,a.jsx)(o.p,{radius:"16px",value:p,onChange:e=>m(e.target.value),type:"text",label:"Пароль",error_text:I?"Пароль должен быть больше 6 символов":""}),(0,a.jsxs)("div",{className:c().select__container,children:[(0,a.jsx)("i",{className:"pi pi-chevron-down ".concat(c().icon)}),(0,a.jsxs)("select",{className:c().select,value:v,onChange:e=>b(e.target.value),children:[(0,a.jsx)("option",{value:"М",className:c().option,children:"Мужской"}),(0,a.jsx)("option",{value:"Ж",className:c().option,children:"Женский"})]})]}),(0,a.jsxs)("div",{className:c().select__container,children:[(0,a.jsx)("i",{className:"pi pi-chevron-down ".concat(c().icon)}),(0,a.jsx)("select",{className:c().select,value:g||"",onChange:e=>x(+e.target.value||null),children:null==C?void 0:C.map(e=>(0,a.jsx)("option",{value:e.RoleID,className:c().option,children:e.Name},e.RoleID))})]})]})]})})}},2078:e=>{e.exports={link:"AnimationLink_link__b_WaA"}},2457:e=>{e.exports={user__item:"AdminChangeUser_user__item__cjvgj"}},2953:e=>{e.exports={breadCrumb:"BreadCrumb_breadCrumb__zNAyP",span:"BreadCrumb_span__jPz6L"}},2985:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.t.bind(s,362,23)),Promise.resolve().then(s.t.bind(s,7761,23)),Promise.resolve().then(s.t.bind(s,2953,23)),Promise.resolve().then(s.t.bind(s,2078,23)),Promise.resolve().then(s.bind(s,6533)),Promise.resolve().then(s.bind(s,673)),Promise.resolve().then(s.t.bind(s,7465,23)),Promise.resolve().then(s.t.bind(s,4760,23)),Promise.resolve().then(s.bind(s,7364))},3208:(e,t,s)=>{"use strict";s.d(t,{f:()=>i});var a=s(5155);let i=e=>{let{children:t,size:s="base",f_weight:i="light",color:n}=e;return(0,a.jsx)("p",{style:{fontSize:"var(--".concat(s,")"),fontWeight:"var(--fw_".concat(i,")"),color:"var(--".concat(n,")")},children:t})}},3342:(e,t,s)=>{"use strict";s.d(t,{K:()=>l});var a=s(5155),i=s(5657),n=s(3870),r=s.n(n);let l=e=>{let{children:t,visible:s,setVdisible:n,closeIcon:l=!1}=e;return(0,a.jsx)(i.l,{className:r().dialog,visible:s,onHide:()=>n(!1),closeIcon:l,children:t})}},3429:e=>{e.exports={header:"Header_header__mjk9B",scrolled:"Header_scrolled__UEvVD",content__right:"Header_content__right__Xotbx",list:"Header_list__Oc7Pz",burger:"Header_burger__do6Rn",theme_switcher:"Header_theme_switcher__kCJqk",dark:"Header_dark__lAzRt",light:"Header_light__Whbrs"}},3494:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(5155),i=s(2115),n=s(5054),r=s.n(n);let l=e=>{let{type:t="text",label:s,value:n,onChange:l,radius:o="32px",error_text:d,required:c=!1}=e,[u,h]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:r().input__container,children:[(0,a.jsx)("input",{required:c,type:"password"===t&&u?"text":t,className:r().input+"".concat(d?" "+r().error:""),value:n,onChange:l,style:{borderRadius:o}}),(0,a.jsx)("label",{className:r().label,children:s}),d&&(0,a.jsx)("label",{className:r().error__label,children:d}),"password"===t&&(0,a.jsx)("button",{type:"button",className:r().password__toggle,onClick:()=>{h(!u)},"aria-label":u?"Скрыть пароль":"Показать пароль",children:(0,a.jsx)("i",{className:"pi ".concat(u?"pi-eye":"pi-eye-slash")})})]})}},3870:e=>{e.exports={dialog:"IDialog_dialog__VHMYO"}},4001:e=>{e.exports={outside__content:"ProfileContentContainer_outside__content__7rkiJ",content:"ProfileContentContainer_content__90rmg"}},4760:e=>{e.exports={admin__container:"admin_admin__container__Mdlx2"}},5054:e=>{e.exports={input__container:"Input_input__container__995Fx",label:"Input_label__dSg8c",error:"Input_error__fm0DP",input:"Input_input__MqBoX",error__label:"Input_error__label__P37Ti",password__toggle:"Input_password__toggle__FdkGg"}},6330:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});var a=s(5155),i=s(6862),n=s.n(i);let r=e=>{let{children:t,disabled:s=!1,onClick:i,radius:r="32px",filled:l=!1,border:o,outlined:d=!1,color:c="text",style:u,type:h,width:_="auto",loading:p=!1,size:m="base",fontSize:g="base"}=e;return p&&(s=!0),(0,a.jsx)("button",{type:h,style:u||{zIndex:10,width:"full"===_?"100%":"auto",fontSize:"var(--".concat(g,")"),borderRadius:r,padding:"base"===m?"10px 25px":"5px 10px",backgroundColor:l?"var(--primary)":"transparent",color:c?"var(--".concat(c,")"):l?"var(--bg)":"var(--text)",border:o?"1px solid var(--".concat(o,")"):d?"1px solid var(--primary)":"none"},className:"".concat(n().button," ").concat(s?n().disabled:n().active," ").concat(d?n().outlined:""),disabled:s,onClick:i,children:p?(0,a.jsx)("span",{style:{fontSize:"1.2rem"},className:"".concat(n().spinner," ")}):t})}},6533:(e,t,s)=>{"use strict";s.d(t,{AdminChangeUser:()=>f});var a=s(5155),i=s(2115),n=s(6330),r=s(3494),l=s(8045),o=s(2457),d=s.n(o),c=s(3208),u=s(7820),h=s.n(u),_=s(9418),p=s(3342);let m=()=>{let e=localStorage.getItem("token")||"",{currentUser:t,deleteUser:s,isVisibleDialogDelete:i,setVisibleDialogDelete:r}=(0,_.g)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.K,{visible:i,setVdisible:r,children:(0,a.jsxs)("div",{className:h().dialog,children:[(0,a.jsx)(c.f,{size:"medium",children:"Вы уверены?"}),(0,a.jsxs)(c.f,{children:["Логин: ",null==t?void 0:t.Login]}),(0,a.jsxs)(c.f,{children:["Имя: ",null==t?void 0:t.First_Name]}),(0,a.jsxs)(c.f,{children:["Email: ",null==t?void 0:t.Email]}),(0,a.jsxs)("div",{className:h().dialog__btn,children:[(0,a.jsx)(n.$,{outlined:!0,onClick:()=>r(),children:"Отменить"}),(0,a.jsx)(n.$,{type:"submit",color:"white",filled:!0,onClick:()=>s(e,null==t?void 0:t.ID),children:"Удалить"})]})]})})})},g=()=>{let e=localStorage.getItem("token")||"",{currentUser:t,changePassword:s,isVisibleDialogPassword:l,setVisibleDialogPassword:o}=(0,_.g)(),[d,u]=(0,i.useState)(!1),[m,g]=(0,i.useState)("");return(0,i.useEffect)(()=>{u(!1)},[m]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.K,{visible:l,setVdisible:o,children:(0,a.jsxs)("div",{className:h().dialog,children:[(0,a.jsx)(c.f,{size:"medium",children:"Изменить пароль пользователю"}),(0,a.jsxs)(c.f,{children:["Логин: ",null==t?void 0:t.Login]}),(0,a.jsxs)(c.f,{children:["Имя: ",null==t?void 0:t.First_Name]}),(0,a.jsxs)(c.f,{children:["Email: ",null==t?void 0:t.Email]}),(0,a.jsx)(r.p,{value:m,onChange:e=>g(e.target.value),label:"Новый пароль",error_text:d?"Пароль должен быть больше 6 символов":""}),(0,a.jsxs)("div",{className:h().dialog__btn,children:[(0,a.jsx)(n.$,{outlined:!0,onClick:()=>o(),children:"Отменить"}),(0,a.jsx)(n.$,{type:"submit",color:"white",filled:!0,onClick:()=>void(m.length<6?u(!0):s(e,null==t?void 0:t.ID,m)),children:"Сохранить"})]})]})})})};var x=s(4173);s(2878);var v=s(7814);let b=()=>{let{isVisibleDialogEdit:e,setVisibleDialogEdit:t,editUser:s}=(0,_.g)(),l=(0,_.g)(e=>e.currentUser),[o,d]=(0,i.useState)({login:(null==l?void 0:l.Login)||"",firstName:(null==l?void 0:l.First_Name)||"",lastName:(null==l?void 0:l.Last_Name)||"",middleName:(null==l?void 0:l.Middle_Name)||"",email:(null==l?void 0:l.Email)||"",phone:(null==l?void 0:l.Phone)||"",birthDate:(null==l?void 0:l.BirthDate)||"",sex:(null==l?void 0:l.Sex)||"",roleName:(null==l?void 0:l.RoleID)||1,comment:(null==l?void 0:l.Comment)||"",password:"",isActive:(null==l?void 0:l.IsActive)||!1,isDeleted:(null==l?void 0:l.IsDeleted)||!1});return(0,i.useEffect)(()=>{l&&d({login:l.Login,lastName:l.Last_Name?l.Last_Name:"",firstName:l.First_Name?l.First_Name:"",middleName:l.Middle_Name?l.Middle_Name:"",email:l.Email,phone:l.Phone?l.Phone:"",sex:l.Sex?l.Sex:"",birthDate:l.BirthDate?l.BirthDate:"",comment:l.Comment?l.Comment:"",roleName:l.RoleID,isActive:l.IsActive,isDeleted:l.IsDeleted,password:""})},[l]),(0,a.jsx)(p.K,{visible:e,setVdisible:t,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(c.f,{size:"medium",children:"Изменить пользователя"}),(0,a.jsx)(r.p,{label:"Логин",type:"text",radius:"16px",value:o.login,onChange:e=>d({...o,login:e.target.value})}),(0,a.jsx)(r.p,{label:"Имя",type:"text",radius:"16px",value:o.firstName,onChange:e=>d({...o,firstName:e.target.value})}),(0,a.jsx)(r.p,{label:"Фамилия",type:"text",radius:"16px",value:o.lastName,onChange:e=>d({...o,lastName:e.target.value})}),(0,a.jsx)(r.p,{label:"Отчество",type:"text",radius:"16px",value:o.middleName,onChange:e=>d({...o,middleName:e.target.value})}),(0,a.jsx)(r.p,{label:"Почта",type:"text",radius:"16px",value:o.email,onChange:e=>d({...o,email:e.target.value})}),(0,a.jsx)(r.p,{label:"Пол",type:"text",radius:"16px",value:o.sex,onChange:e=>d({...o,sex:e.target.value})}),(0,a.jsx)(r.p,{label:"Комментарий",type:"text",radius:"16px",value:o.comment,onChange:e=>d({...o,comment:e.target.value})}),(0,a.jsx)(n.$,{width:"full",outlined:!0,onClick:()=>void s(localStorage.getItem("token")||"",null==l?void 0:l.ID,o.login,o.lastName,o.firstName,o.middleName,o.email,o.phone,o.sex,o.birthDate,o.comment,o.roleName,o.password),children:"Сохранить"})]})})},j=(0,i.lazy)(()=>Promise.all([s.e(6163),s.e(7583)]).then(s.bind(s,7583))),f=()=>{let e=(0,i.useRef)(null),t=localStorage.getItem("token")||"",{fetchUsers:s,searchQuery:o,setSearchQuery:c,error:u,success:h,loading:p}=(0,_.g)();(0,i.useEffect)(()=>{s(t)},[s,t]);let f=(t,s)=>{var a;null==(a=e.current)||a.show({severity:s,summary:t,life:3e3})};return((0,i.useEffect)(()=>{u&&f(u,"error"),h&&f(h,"success")},[u,h]),p)?(0,a.jsx)(v.y,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.y,{ref:e,position:"bottom-left"}),(0,a.jsxs)(l.K,{children:[(0,a.jsx)(n.$,{disabled:!0,filled:!0,color:"white",children:"Назначение ролей"}),(0,a.jsx)(r.p,{radius:"16px",type:"text",label:"Поиск по id, email, логину",value:o,onChange:e=>c(e.target.value)}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:d().user__item,children:(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(v.y,{}),children:(0,a.jsx)(j,{})})})})]}),(0,a.jsx)(m,{}),(0,a.jsx)(g,{}),(0,a.jsx)(b,{})]})}},6862:e=>{e.exports={button:"Button_button__MKRSq",disabled:"Button_disabled__zBBD3",active:"Button_active__ecv28",spinner:"Button_spinner__C4NUU",pulseSpin:"Button_pulseSpin__3QKkJ"}},7364:(e,t,s)=>{"use strict";s.d(t,{Header:()=>p});var a=s(5155);let i={src:"/_next/static/media/burger-menu.f63868ce.svg",height:40,width:40,blurWidth:0,blurHeight:0};var n=s(6330),r=s(3429),l=s.n(r),o=s(8056),d=s(6874),c=s.n(d),u=s(6766),h=s(7374),_=s(2115);let p=()=>{let e=(0,o.k)(e=>e.logout),t=(0,o.k)(e=>e.user),[s,r]=(0,_.useState)(!1);return(0,_.useEffect)(()=>{let e=()=>{window.scrollY>100?r(!0):r(!1)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,a.jsx)("header",{children:(0,a.jsx)("div",{className:"".concat(l().header," ").concat(s?l().scrolled:""),children:(0,a.jsxs)("div",{className:l().content__right,children:[(0,a.jsx)(u.default,{src:i,alt:"",className:l().burger}),(null==t?void 0:t.RoleName)==="Админ"&&(0,a.jsx)(c(),{href:"/admin",children:(0,a.jsx)(n.$,{color:"white",filled:!0,children:"admin"})}),(0,a.jsxs)("ul",{className:l().list,children:[(0,a.jsx)(h.H,{href:"/profile",size:"base",children:"Профиль"}),(0,a.jsx)(h.H,{href:"/profile/all-tasks",size:"base",children:"Мои задачи"}),(0,a.jsx)(h.H,{href:"/",size:"base",children:"Категории заданий"})]}),t?(0,a.jsx)(n.$,{outlined:!0,onClick:e,children:"Выйти"}):(0,a.jsx)(c(),{href:"/auth",children:(0,a.jsx)(n.$,{color:"white",filled:!0,children:"Войти"})})]})})})}},7374:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var a=s(5155),i=s(2078),n=s.n(i),r=s(6874),l=s.n(r);let o=e=>{let{children:t,href:s,size:i="base",...r}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("li",{...r,className:n().link,style:{fontSize:"var(--".concat(i,")")},children:(0,a.jsx)(l(),{href:s||"/",children:t})})})}},7465:e=>{e.exports={footer:"Footer_footer__0UEuE",bottom:"Footer_bottom__Cb1G_",line:"Footer_line__uYmv3",vertical__line:"Footer_vertical__line__lDeQ6","footer-sticky":"Footer_footer-sticky__E_fhZ",container:"Footer_container__MzX7a",mobile:"Footer_mobile__D4940",content:"Footer_content__vgu2q"}},7761:e=>{e.exports={list:"UlLi_list__5rBeg"}},7814:(e,t,s)=>{"use strict";s.d(t,{y:()=>r});var a=s(5155),i=s(422),n=s.n(i);let r=()=>(0,a.jsx)("div",{className:n().spinner,children:(0,a.jsx)("span",{className:n().loader})})},7820:e=>{e.exports={dialog:"DialogDelete_dialog__47vhR",dialog__btn:"DialogDelete_dialog__btn__8xKbj"}},7874:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});class a{static async getUsers(e){return(await fetch("".concat("https://info-run.ru","/api/students"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async DeleteUser(e,t){return(await fetch("".concat("https://info-run.ru","/api/admin/delete_student?email=").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async ChangePassword(e,t,s){return(await fetch("".concat("https://info-run.ru","/api/admin/students/").concat(t,"/change-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({new_password:s})})).json()}static async adminRoles(e){return(await fetch("".concat("https://info-run.ru","/api/admin/roles"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async getStudentLogs(e,t){return(await fetch("".concat("https://info-run.ru","/api/admin/students/").concat(t,"/logs"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}}},8045:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var a=s(5155),i=s(4001),n=s.n(i);let r=e=>{let{children:t,width:s,color:i,borderColor:r}=e;return(0,a.jsx)("div",{className:n().outside__content,style:{maxWidth:s},children:(0,a.jsx)("div",{className:n().content,style:{backgroundColor:i?"var(--".concat(i,")"):"",border:r?"1px solid var(--".concat(i,")"):"1px solid var(--primary)",transition:"all 0.2s ease-in-out"},children:t})})}},8056:(e,t,s)=>{"use strict";s.d(t,{k:()=>r});var a=s(5453),i=s(6786),n=s(525);let r=(0,a.v)((0,i.Zr)((0,i.kg)({user:null,token:null,error:null,loading:!1},e=>({login:async(t,s)=>{e({loading:!0});try{let a=await n.A.loginV2(t,s);if(a.detail){e({error:{error:a.detail.error||"Validation Error",message:a.detail.message||"Invalid credentials"},loading:!1}),console.log(a.detail);return}e({user:a.student,token:a.access_token,error:null,loading:!1}),localStorage.setItem("token",a.access_token),console.log(localStorage.getItem("token"))}catch(s){let t="Authorization error";s instanceof Error&&(t=s.message),e({error:{error:"Authorization error",message:t},loading:!1}),console.log(s)}},logout:async()=>{try{let t=localStorage.getItem("token");await n.A.logout(t||""),e({user:null,token:null}),localStorage.removeItem("token")}catch(e){console.log(e)}},clearError:()=>e({error:null})})),{name:"user-storage"}))},9418:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(5453),i=s(7874);class n{static async getStudents(){return(await fetch("".concat("https://info-run.ru","/students/api"),{method:"GET",headers:{"Content-Type":"application/json"}})).json()}static async deleteStudent(e,t){return(await fetch("".concat("https://info-run.ru","/api/students/delete_student?id=").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json()}static async addNewUser(e,t,s,a,i,n,r,l,o){return(await fetch("".concat("https://info-run.ru","/api/students/new_student"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({Login:t,Last_Name:s,First_Name:a,Email:i,Phone:n,Sex:r,RoleID:l,IsActive:!0,Password:o})})).json()}static async editUser(e,t,s,a,i,n,r,l,o,d,c,u,h){return(await fetch("".concat("https://info-run.ru","/api/students/edit_student?id=").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({Login:s,Last_Name:a,First_Name:i,Middle_Name:n,Email:r,Phone:l,Sex:o,BirthDate:d,Comment:c,RoleID:u,IsActive:!0,Password:h})})).json()}}let r=(0,a.v)((e,t)=>({users:[],currentUser:null,loading:!1,isVisiblePopup:!1,isVisibleDialogPassword:!1,isVisibleDialogDelete:!1,isVisibleDialogEdit:!1,error:null,success:null,searchQuery:"",fetchUsers:async t=>{e({loading:!0,error:null});try{let s=await i.A.getUsers(t);e({users:s,loading:!1,success:"Users fetched"})}catch(t){e({error:"Failed to fetch users"+t,loading:!1})}},deleteUser:async(t,s)=>{e({loading:!0});try{await n.deleteStudent(t,s),e(e=>({users:e.users.filter(e=>e.ID!==s),loading:!1,isVisibleDialogDelete:!1,success:"User deleted"}))}catch(t){e({error:"Failed to delete user"+t,loading:!1})}},changePassword:async(t,s,a)=>{e({loading:!0});try{await i.A.ChangePassword(t,s,a),e({loading:!1,isVisibleDialogPassword:!1,success:"Password changed"})}catch(t){e({error:"Failed to change password"+t,loading:!1})}},filteredUsers:()=>{let{users:e,searchQuery:s}=t();if(!s.trim())return e;let a=s.toLowerCase();return e.filter(e=>e.ID.toString().includes(a)||e.Email.toLowerCase().includes(a)||e.Login.toLowerCase().includes(a)||e.First_Name&&e.First_Name.toLowerCase().includes(a))},addNewUser:async(t,s,a,i,r,l,o,d,c)=>{e({loading:!0});try{await n.addNewUser(t,s,a,i,r,l,o,d,c),e({loading:!1,success:"User added"})}catch(t){e({error:"Failed to add user"+t,loading:!1})}},editUser:async(s,a,i,r,l,o,d,c,u,h,_,p,m)=>{e({loading:!0});try{await n.editUser(s,a,i,r,l,o,d,c,u,h,_,p,m),e({loading:!1,success:"User edited",isVisibleDialogEdit:!1}),t().fetchUsers(s)}catch(t){e({error:"Failed to edit user"+t,loading:!1,isVisibleDialogEdit:!1})}},setSearchQuery:t=>e({searchQuery:t}),setVisiblePopup:s=>e({isVisiblePopup:!t().isVisiblePopup,currentUser:s}),setVisibleDialogPassword:()=>e({isVisibleDialogPassword:!t().isVisibleDialogPassword,currentUser:t().currentUser,isVisiblePopup:!1}),setVisibleDialogDelete:()=>e({isVisibleDialogDelete:!t().isVisibleDialogDelete,currentUser:t().currentUser,isVisiblePopup:!1}),setVisibleDialogEdit:()=>e({isVisibleDialogEdit:!t().isVisibleDialogEdit,currentUser:t().currentUser,isVisiblePopup:!1}),reset:()=>e({users:[],error:null})}))},9463:e=>{e.exports={select:"AdminNewUser_select__Otjz2",option:"AdminNewUser_option__FeDne",select__container:"AdminNewUser_select__container__cNyEO",icon:"AdminNewUser_icon__miluJ",error:"AdminNewUser_error__qY7W_"}}},e=>{e.O(0,[7446,6545,1178,4599,7009,8352,3068,2600,5657,4786,8441,5964,7358],()=>e(e.s=2985)),_N_E=e.O()}]);